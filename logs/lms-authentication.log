2025-11-25T00:55:20.185+02:00  INFO 16836 --- [lms-authentication] [restartedMain] com.lms.LmsApplication                   : Starting LmsApplication using Java 17.0.12 with PID 16836 (D:\flutter_projects\try_edu_backend\backend\target\classes started by am356 in D:\flutter_projects\try_edu_backend\backend)
2025-11-25T00:55:20.191+02:00 DEBUG 16836 --- [lms-authentication] [restartedMain] com.lms.LmsApplication                   : Running with Spring Boot v3.2.0, Spring v6.1.1
2025-11-25T00:55:20.193+02:00  INFO 16836 --- [lms-authentication] [restartedMain] com.lms.LmsApplication                   : No active profile set, falling back to 1 default profile: "default"
2025-11-25T00:55:20.244+02:00  INFO 16836 --- [lms-authentication] [restartedMain] .e.DevToolsPropertyDefaultsPostProcessor : Devtools property defaults active! Set 'spring.devtools.add-properties' to 'false' to disable
2025-11-25T00:55:20.245+02:00  INFO 16836 --- [lms-authentication] [restartedMain] .e.DevToolsPropertyDefaultsPostProcessor : For additional web related logging consider setting the 'logging.level.web' property to 'DEBUG'
2025-11-25T00:55:21.296+02:00  INFO 16836 --- [lms-authentication] [restartedMain] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-11-25T00:55:21.369+02:00  INFO 16836 --- [lms-authentication] [restartedMain] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 66 ms. Found 6 JPA repository interfaces.
2025-11-25T00:55:22.272+02:00  INFO 16836 --- [lms-authentication] [restartedMain] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port 8081 (http)
2025-11-25T00:55:22.284+02:00  INFO 16836 --- [lms-authentication] [restartedMain] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2025-11-25T00:55:22.285+02:00  INFO 16836 --- [lms-authentication] [restartedMain] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.16]
2025-11-25T00:55:22.347+02:00  INFO 16836 --- [lms-authentication] [restartedMain] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2025-11-25T00:55:22.348+02:00  INFO 16836 --- [lms-authentication] [restartedMain] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 2103 ms
2025-11-25T00:55:22.629+02:00  INFO 16836 --- [lms-authentication] [restartedMain] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2025-11-25T00:55:22.709+02:00  INFO 16836 --- [lms-authentication] [restartedMain] org.hibernate.Version                    : HHH000412: Hibernate ORM core version 6.3.1.Final
2025-11-25T00:55:22.749+02:00  INFO 16836 --- [lms-authentication] [restartedMain] o.h.c.internal.RegionFactoryInitiator    : HHH000026: Second-level cache disabled
2025-11-25T00:55:22.985+02:00  INFO 16836 --- [lms-authentication] [restartedMain] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2025-11-25T00:55:23.013+02:00  INFO 16836 --- [lms-authentication] [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2025-11-25T00:55:23.191+02:00  INFO 16836 --- [lms-authentication] [restartedMain] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@18b60ea
2025-11-25T00:55:23.193+02:00  INFO 16836 --- [lms-authentication] [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2025-11-25T00:55:23.220+02:00  WARN 16836 --- [lms-authentication] [restartedMain] org.hibernate.orm.deprecation            : HHH90000025: MySQL8Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-11-25T00:55:23.221+02:00  WARN 16836 --- [lms-authentication] [restartedMain] org.hibernate.orm.deprecation            : HHH90000026: MySQL8Dialect has been deprecated; use org.hibernate.dialect.MySQLDialect instead
2025-11-25T00:55:24.135+02:00  INFO 16836 --- [lms-authentication] [restartedMain] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-11-25T00:55:25.812+02:00  INFO 16836 --- [lms-authentication] [restartedMain] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-11-25T00:55:26.079+02:00  INFO 16836 --- [lms-authentication] [restartedMain] o.s.d.j.r.query.QueryEnhancerFactory     : Hibernate is in classpath; If applicable, HQL parser will be used.
2025-11-25T00:55:26.613+02:00 DEBUG 16836 --- [lms-authentication] [restartedMain] c.lms.security.JwtAuthenticationFilter   : Filter 'jwtAuthenticationFilter' configured for use
2025-11-25T00:55:26.614+02:00 DEBUG 16836 --- [lms-authentication] [restartedMain] o.s.w.f.ServerHttpObservationFilter      : Filter 'webMvcObservationFilter' configured for use
2025-11-25T00:55:27.183+02:00  INFO 16836 --- [lms-authentication] [restartedMain] o.s.b.a.e.web.EndpointLinksResolver      : Exposing 3 endpoint(s) beneath base path '/actuator'
2025-11-25T00:55:27.417+02:00 DEBUG 16836 --- [lms-authentication] [restartedMain] s.w.s.m.m.a.RequestMappingHandlerMapping : 14 mappings in 'requestMappingHandlerMapping'
2025-11-25T00:55:27.619+02:00 DEBUG 16836 --- [lms-authentication] [restartedMain] o.s.w.s.handler.SimpleUrlHandlerMapping  : Patterns [/webjars/**, /**, /swagger-ui*/*swagger-initializer.js, /swagger-ui*/**] in 'resourceHandlerMapping'
2025-11-25T00:55:27.683+02:00  INFO 16836 --- [lms-authentication] [restartedMain] o.s.s.web.DefaultSecurityFilterChain     : Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@53cbf64e, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@134499be, org.springframework.security.web.context.SecurityContextHolderFilter@44f3396d, org.springframework.security.web.header.HeaderWriterFilter@741685fe, org.springframework.web.filter.CorsFilter@2b5fb80b, org.springframework.security.web.authentication.logout.LogoutFilter@4346ab0f, com.lms.security.JwtAuthenticationFilter@3289729b, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@2de9e867, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@4774ee6d, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@dac0a1b, org.springframework.security.web.session.SessionManagementFilter@241250a3, org.springframework.security.web.access.ExceptionTranslationFilter@22d40651, org.springframework.security.web.access.intercept.AuthorizationFilter@251475a0]
2025-11-25T00:55:27.811+02:00 DEBUG 16836 --- [lms-authentication] [restartedMain] s.w.s.m.m.a.RequestMappingHandlerAdapter : ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-11-25T00:55:27.854+02:00 DEBUG 16836 --- [lms-authentication] [restartedMain] .m.m.a.ExceptionHandlerExceptionResolver : ControllerAdvice beans: 2 @ExceptionHandler, 1 ResponseBodyAdvice
2025-11-25T00:55:28.209+02:00  INFO 16836 --- [lms-authentication] [restartedMain] o.s.b.d.a.OptionalLiveReloadServer       : LiveReload server is running on port 35729
2025-11-25T00:55:28.285+02:00  INFO 16836 --- [lms-authentication] [restartedMain] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port 8081 (http) with context path ''
2025-11-25T00:55:28.297+02:00  INFO 16836 --- [lms-authentication] [restartedMain] com.lms.LmsApplication                   : Started LmsApplication in 8.529 seconds (process running for 8.976)
2025-11-25T00:55:28.417+02:00 DEBUG 16836 --- [lms-authentication] [restartedMain] org.hibernate.SQL                        : 
    select
        p1_0.permission_id 
    from
        permissions p1_0 
    where
        p1_0.permission_name=? 
    limit
        ?
2025-11-25T00:55:28.445+02:00 DEBUG 16836 --- [lms-authentication] [restartedMain] org.hibernate.SQL                        : 
    select
        p1_0.permission_id 
    from
        permissions p1_0 
    where
        p1_0.permission_name=? 
    limit
        ?
2025-11-25T00:55:28.447+02:00 DEBUG 16836 --- [lms-authentication] [restartedMain] org.hibernate.SQL                        : 
    select
        p1_0.permission_id 
    from
        permissions p1_0 
    where
        p1_0.permission_name=? 
    limit
        ?
2025-11-25T00:55:28.450+02:00 DEBUG 16836 --- [lms-authentication] [restartedMain] org.hibernate.SQL                        : 
    select
        p1_0.permission_id 
    from
        permissions p1_0 
    where
        p1_0.permission_name=? 
    limit
        ?
2025-11-25T00:55:28.453+02:00 DEBUG 16836 --- [lms-authentication] [restartedMain] org.hibernate.SQL                        : 
    select
        p1_0.permission_id 
    from
        permissions p1_0 
    where
        p1_0.permission_name=? 
    limit
        ?
2025-11-25T00:55:28.457+02:00 DEBUG 16836 --- [lms-authentication] [restartedMain] org.hibernate.SQL                        : 
    select
        p1_0.permission_id 
    from
        permissions p1_0 
    where
        p1_0.permission_name=? 
    limit
        ?
2025-11-25T00:55:28.459+02:00 DEBUG 16836 --- [lms-authentication] [restartedMain] org.hibernate.SQL                        : 
    select
        p1_0.permission_id 
    from
        permissions p1_0 
    where
        p1_0.permission_name=? 
    limit
        ?
2025-11-25T00:55:28.462+02:00 DEBUG 16836 --- [lms-authentication] [restartedMain] org.hibernate.SQL                        : 
    select
        p1_0.permission_id 
    from
        permissions p1_0 
    where
        p1_0.permission_name=? 
    limit
        ?
2025-11-25T00:55:28.466+02:00 DEBUG 16836 --- [lms-authentication] [restartedMain] org.hibernate.SQL                        : 
    select
        r1_0.role_id 
    from
        roles r1_0 
    where
        r1_0.role_name=? 
    limit
        ?
2025-11-25T00:55:28.471+02:00 DEBUG 16836 --- [lms-authentication] [restartedMain] org.hibernate.SQL                        : 
    select
        r1_0.role_id 
    from
        roles r1_0 
    where
        r1_0.role_name=? 
    limit
        ?
2025-11-25T00:55:28.473+02:00 DEBUG 16836 --- [lms-authentication] [restartedMain] org.hibernate.SQL                        : 
    select
        r1_0.role_id 
    from
        roles r1_0 
    where
        r1_0.role_name=? 
    limit
        ?
2025-11-25T00:55:28.476+02:00 DEBUG 16836 --- [lms-authentication] [restartedMain] org.hibernate.SQL                        : 
    select
        r1_0.role_id 
    from
        roles r1_0 
    where
        r1_0.role_name=? 
    limit
        ?
2025-11-25T00:55:40.025+02:00  INFO 16836 --- [lms-authentication] [http-nio-8081-exec-1] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-11-25T00:55:40.025+02:00  INFO 16836 --- [lms-authentication] [http-nio-8081-exec-1] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'
2025-11-25T00:55:40.025+02:00 DEBUG 16836 --- [lms-authentication] [http-nio-8081-exec-1] o.s.web.servlet.DispatcherServlet        : Detected StandardServletMultipartResolver
2025-11-25T00:55:40.026+02:00 DEBUG 16836 --- [lms-authentication] [http-nio-8081-exec-1] o.s.web.servlet.DispatcherServlet        : Detected AcceptHeaderLocaleResolver
2025-11-25T00:55:40.026+02:00 DEBUG 16836 --- [lms-authentication] [http-nio-8081-exec-1] o.s.web.servlet.DispatcherServlet        : Detected FixedThemeResolver
2025-11-25T00:55:40.027+02:00 DEBUG 16836 --- [lms-authentication] [http-nio-8081-exec-1] o.s.web.servlet.DispatcherServlet        : Detected org.springframework.web.servlet.view.DefaultRequestToViewNameTranslator@153409c7
2025-11-25T00:55:40.027+02:00 DEBUG 16836 --- [lms-authentication] [http-nio-8081-exec-1] o.s.web.servlet.DispatcherServlet        : Detected org.springframework.web.servlet.support.SessionFlashMapManager@32bf8764
2025-11-25T00:55:40.027+02:00 DEBUG 16836 --- [lms-authentication] [http-nio-8081-exec-1] o.s.web.servlet.DispatcherServlet        : enableLoggingRequestDetails='false': request parameters and headers will be masked to prevent unsafe logging of potentially sensitive data
2025-11-25T00:55:40.027+02:00  INFO 16836 --- [lms-authentication] [http-nio-8081-exec-1] o.s.web.servlet.DispatcherServlet        : Completed initialization in 2 ms
2025-11-25T00:55:40.043+02:00 DEBUG 16836 --- [lms-authentication] [http-nio-8081-exec-1] o.s.security.web.FilterChainProxy        : Securing POST /api/auth/register
2025-11-25T00:55:40.055+02:00 DEBUG 16836 --- [lms-authentication] [http-nio-8081-exec-1] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2025-11-25T00:55:40.058+02:00  WARN 16836 --- [lms-authentication] [http-nio-8081-exec-1] o.s.w.s.h.HandlerMappingIntrospector     : Cache miss for REQUEST dispatch to '/api/auth/register' (previous null). Performing MatchableHandlerMapping lookup. This is logged once only at WARN level, and every time at TRACE.
2025-11-25T00:55:40.065+02:00 DEBUG 16836 --- [lms-authentication] [http-nio-8081-exec-1] o.s.security.web.FilterChainProxy        : Secured POST /api/auth/register
2025-11-25T00:55:40.067+02:00 DEBUG 16836 --- [lms-authentication] [http-nio-8081-exec-1] o.s.web.servlet.DispatcherServlet        : POST "/api/auth/register", parameters={}
2025-11-25T00:55:40.069+02:00 DEBUG 16836 --- [lms-authentication] [http-nio-8081-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.lms.controller.AuthController#register(RegisterRequest)
2025-11-25T00:55:40.139+02:00 DEBUG 16836 --- [lms-authentication] [http-nio-8081-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [RegisterRequest(email=amir123@campus.edu, password=Password@123, firstName=Amir, lastName=Doe, phone (truncated)...]
2025-11-25T00:55:40.234+02:00 DEBUG 16836 --- [lms-authentication] [http-nio-8081-exec-1] org.hibernate.SQL                        : 
    select
        case 
            when count(u1_0.user_id)>0 
                then 1 
            else 0 
        end 
    from
        users u1_0 
    where
        u1_0.email=? 
        and u1_0.deleted_at is null
2025-11-25T00:55:40.526+02:00 DEBUG 16836 --- [lms-authentication] [http-nio-8081-exec-1] org.hibernate.SQL                        : 
    select
        r1_0.role_id,
        r1_0.created_at,
        r1_0.role_description,
        r1_0.role_name 
    from
        roles r1_0 
    where
        r1_0.role_name=?
2025-11-25T00:55:40.550+02:00 DEBUG 16836 --- [lms-authentication] [http-nio-8081-exec-1] org.hibernate.SQL                        : 
    select
        u1_0.role_id,
        u1_1.user_id,
        u1_1.campus_id,
        u1_1.created_at,
        u1_1.deleted_at,
        u1_1.email,
        u1_1.email_verified,
        u1_1.first_name,
        u1_1.last_login_at,
        u1_1.last_name,
        u1_1.password_hash,
        u1_1.phone,
        u1_1.profile_picture_url,
        u1_1.status,
        tfa1_0.auth_id,
        tfa1_0.backup_codes,
        tfa1_0.created_at,
        tfa1_0.enabled,
        tfa1_0.last_used_at,
        tfa1_0.secret_key,
        tfa1_0.updated_at,
        tfa1_0.user_id,
        u1_1.updated_at 
    from
        user_roles u1_0 
    join
        users u1_1 
            on u1_1.user_id=u1_0.user_id 
    left join
        two_factor_auth tfa1_0 
            on u1_1.user_id=tfa1_0.user_id 
    where
        u1_0.role_id=?
2025-11-25T00:55:40.567+02:00 DEBUG 16836 --- [lms-authentication] [http-nio-8081-exec-1] org.hibernate.SQL                        : 
    select
        r1_0.user_id,
        r1_1.role_id,
        r1_1.created_at,
        r1_1.role_description,
        r1_1.role_name 
    from
        user_roles r1_0 
    join
        roles r1_1 
            on r1_1.role_id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-11-25T00:55:40.574+02:00 DEBUG 16836 --- [lms-authentication] [http-nio-8081-exec-1] org.hibernate.SQL                        : 
    select
        u1_0.role_id,
        u1_1.user_id,
        u1_1.campus_id,
        u1_1.created_at,
        u1_1.deleted_at,
        u1_1.email,
        u1_1.email_verified,
        u1_1.first_name,
        u1_1.last_login_at,
        u1_1.last_name,
        u1_1.password_hash,
        u1_1.phone,
        u1_1.profile_picture_url,
        u1_1.status,
        tfa1_0.auth_id,
        tfa1_0.backup_codes,
        tfa1_0.created_at,
        tfa1_0.enabled,
        tfa1_0.last_used_at,
        tfa1_0.secret_key,
        tfa1_0.updated_at,
        tfa1_0.user_id,
        u1_1.updated_at 
    from
        user_roles u1_0 
    join
        users u1_1 
            on u1_1.user_id=u1_0.user_id 
    left join
        two_factor_auth tfa1_0 
            on u1_1.user_id=tfa1_0.user_id 
    where
        u1_0.role_id=?
2025-11-25T00:55:40.578+02:00 DEBUG 16836 --- [lms-authentication] [http-nio-8081-exec-1] org.hibernate.SQL                        : 
    select
        p1_0.role_id,
        p1_1.permission_id,
        p1_1.created_at,
        p1_1.module,
        p1_1.permission_description,
        p1_1.permission_name 
    from
        role_permissions p1_0 
    join
        permissions p1_1 
            on p1_1.permission_id=p1_0.permission_id 
    where
        p1_0.role_id=?
2025-11-25T00:55:40.584+02:00 DEBUG 16836 --- [lms-authentication] [http-nio-8081-exec-1] org.hibernate.SQL                        : 
    select
        r1_0.permission_id,
        r1_1.role_id,
        r1_1.created_at,
        r1_1.role_description,
        r1_1.role_name 
    from
        role_permissions r1_0 
    join
        roles r1_1 
            on r1_1.role_id=r1_0.role_id 
    where
        r1_0.permission_id=?
2025-11-25T00:55:40.591+02:00 DEBUG 16836 --- [lms-authentication] [http-nio-8081-exec-1] org.hibernate.SQL                        : 
    select
        p1_0.role_id,
        p1_1.permission_id,
        p1_1.created_at,
        p1_1.module,
        p1_1.permission_description,
        p1_1.permission_name 
    from
        role_permissions p1_0 
    join
        permissions p1_1 
            on p1_1.permission_id=p1_0.permission_id 
    where
        p1_0.role_id=?
2025-11-25T00:55:40.593+02:00 DEBUG 16836 --- [lms-authentication] [http-nio-8081-exec-1] org.hibernate.SQL                        : 
    select
        u1_0.role_id,
        u1_1.user_id,
        u1_1.campus_id,
        u1_1.created_at,
        u1_1.deleted_at,
        u1_1.email,
        u1_1.email_verified,
        u1_1.first_name,
        u1_1.last_login_at,
        u1_1.last_name,
        u1_1.password_hash,
        u1_1.phone,
        u1_1.profile_picture_url,
        u1_1.status,
        tfa1_0.auth_id,
        tfa1_0.backup_codes,
        tfa1_0.created_at,
        tfa1_0.enabled,
        tfa1_0.last_used_at,
        tfa1_0.secret_key,
        tfa1_0.updated_at,
        tfa1_0.user_id,
        u1_1.updated_at 
    from
        user_roles u1_0 
    join
        users u1_1 
            on u1_1.user_id=u1_0.user_id 
    left join
        two_factor_auth tfa1_0 
            on u1_1.user_id=tfa1_0.user_id 
    where
        u1_0.role_id=?
2025-11-25T00:55:40.596+02:00 DEBUG 16836 --- [lms-authentication] [http-nio-8081-exec-1] org.hibernate.SQL                        : 
    select
        r1_0.user_id,
        r1_1.role_id,
        r1_1.created_at,
        r1_1.role_description,
        r1_1.role_name 
    from
        user_roles r1_0 
    join
        roles r1_1 
            on r1_1.role_id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-11-25T00:55:40.598+02:00 DEBUG 16836 --- [lms-authentication] [http-nio-8081-exec-1] org.hibernate.SQL                        : 
    select
        u1_0.role_id,
        u1_1.user_id,
        u1_1.campus_id,
        u1_1.created_at,
        u1_1.deleted_at,
        u1_1.email,
        u1_1.email_verified,
        u1_1.first_name,
        u1_1.last_login_at,
        u1_1.last_name,
        u1_1.password_hash,
        u1_1.phone,
        u1_1.profile_picture_url,
        u1_1.status,
        tfa1_0.auth_id,
        tfa1_0.backup_codes,
        tfa1_0.created_at,
        tfa1_0.enabled,
        tfa1_0.last_used_at,
        tfa1_0.secret_key,
        tfa1_0.updated_at,
        tfa1_0.user_id,
        u1_1.updated_at 
    from
        user_roles u1_0 
    join
        users u1_1 
            on u1_1.user_id=u1_0.user_id 
    left join
        two_factor_auth tfa1_0 
            on u1_1.user_id=tfa1_0.user_id 
    where
        u1_0.role_id=?
2025-11-25T00:55:40.600+02:00 DEBUG 16836 --- [lms-authentication] [http-nio-8081-exec-1] org.hibernate.SQL                        : 
    select
        p1_0.role_id,
        p1_1.permission_id,
        p1_1.created_at,
        p1_1.module,
        p1_1.permission_description,
        p1_1.permission_name 
    from
        role_permissions p1_0 
    join
        permissions p1_1 
            on p1_1.permission_id=p1_0.permission_id 
    where
        p1_0.role_id=?
2025-11-25T00:55:40.603+02:00 DEBUG 16836 --- [lms-authentication] [http-nio-8081-exec-1] org.hibernate.SQL                        : 
    select
        r1_0.permission_id,
        r1_1.role_id,
        r1_1.created_at,
        r1_1.role_description,
        r1_1.role_name 
    from
        role_permissions r1_0 
    join
        roles r1_1 
            on r1_1.role_id=r1_0.role_id 
    where
        r1_0.permission_id=?
2025-11-25T00:55:40.605+02:00 DEBUG 16836 --- [lms-authentication] [http-nio-8081-exec-1] org.hibernate.SQL                        : 
    select
        r1_0.permission_id,
        r1_1.role_id,
        r1_1.created_at,
        r1_1.role_description,
        r1_1.role_name 
    from
        role_permissions r1_0 
    join
        roles r1_1 
            on r1_1.role_id=r1_0.role_id 
    where
        r1_0.permission_id=?
2025-11-25T00:55:40.606+02:00 DEBUG 16836 --- [lms-authentication] [http-nio-8081-exec-1] org.hibernate.SQL                        : 
    select
        p1_0.role_id,
        p1_1.permission_id,
        p1_1.created_at,
        p1_1.module,
        p1_1.permission_description,
        p1_1.permission_name 
    from
        role_permissions p1_0 
    join
        permissions p1_1 
            on p1_1.permission_id=p1_0.permission_id 
    where
        p1_0.role_id=?
2025-11-25T00:55:40.608+02:00 DEBUG 16836 --- [lms-authentication] [http-nio-8081-exec-1] org.hibernate.SQL                        : 
    select
        u1_0.role_id,
        u1_1.user_id,
        u1_1.campus_id,
        u1_1.created_at,
        u1_1.deleted_at,
        u1_1.email,
        u1_1.email_verified,
        u1_1.first_name,
        u1_1.last_login_at,
        u1_1.last_name,
        u1_1.password_hash,
        u1_1.phone,
        u1_1.profile_picture_url,
        u1_1.status,
        tfa1_0.auth_id,
        tfa1_0.backup_codes,
        tfa1_0.created_at,
        tfa1_0.enabled,
        tfa1_0.last_used_at,
        tfa1_0.secret_key,
        tfa1_0.updated_at,
        tfa1_0.user_id,
        u1_1.updated_at 
    from
        user_roles u1_0 
    join
        users u1_1 
            on u1_1.user_id=u1_0.user_id 
    left join
        two_factor_auth tfa1_0 
            on u1_1.user_id=tfa1_0.user_id 
    where
        u1_0.role_id=?
2025-11-25T00:55:40.611+02:00 DEBUG 16836 --- [lms-authentication] [http-nio-8081-exec-1] org.hibernate.SQL                        : 
    select
        r1_0.user_id,
        r1_1.role_id,
        r1_1.created_at,
        r1_1.role_description,
        r1_1.role_name 
    from
        user_roles r1_0 
    join
        roles r1_1 
            on r1_1.role_id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-11-25T00:55:40.614+02:00 DEBUG 16836 --- [lms-authentication] [http-nio-8081-exec-1] org.hibernate.SQL                        : 
    select
        u1_0.role_id,
        u1_1.user_id,
        u1_1.campus_id,
        u1_1.created_at,
        u1_1.deleted_at,
        u1_1.email,
        u1_1.email_verified,
        u1_1.first_name,
        u1_1.last_login_at,
        u1_1.last_name,
        u1_1.password_hash,
        u1_1.phone,
        u1_1.profile_picture_url,
        u1_1.status,
        tfa1_0.auth_id,
        tfa1_0.backup_codes,
        tfa1_0.created_at,
        tfa1_0.enabled,
        tfa1_0.last_used_at,
        tfa1_0.secret_key,
        tfa1_0.updated_at,
        tfa1_0.user_id,
        u1_1.updated_at 
    from
        user_roles u1_0 
    join
        users u1_1 
            on u1_1.user_id=u1_0.user_id 
    left join
        two_factor_auth tfa1_0 
            on u1_1.user_id=tfa1_0.user_id 
    where
        u1_0.role_id=?
2025-11-25T00:55:40.616+02:00 DEBUG 16836 --- [lms-authentication] [http-nio-8081-exec-1] org.hibernate.SQL                        : 
    select
        p1_0.role_id,
        p1_1.permission_id,
        p1_1.created_at,
        p1_1.module,
        p1_1.permission_description,
        p1_1.permission_name 
    from
        role_permissions p1_0 
    join
        permissions p1_1 
            on p1_1.permission_id=p1_0.permission_id 
    where
        p1_0.role_id=?
2025-11-25T00:55:40.618+02:00 DEBUG 16836 --- [lms-authentication] [http-nio-8081-exec-1] org.hibernate.SQL                        : 
    select
        r1_0.permission_id,
        r1_1.role_id,
        r1_1.created_at,
        r1_1.role_description,
        r1_1.role_name 
    from
        role_permissions r1_0 
    join
        roles r1_1 
            on r1_1.role_id=r1_0.role_id 
    where
        r1_0.permission_id=?
2025-11-25T00:55:40.620+02:00 DEBUG 16836 --- [lms-authentication] [http-nio-8081-exec-1] org.hibernate.SQL                        : 
    select
        p1_0.role_id,
        p1_1.permission_id,
        p1_1.created_at,
        p1_1.module,
        p1_1.permission_description,
        p1_1.permission_name 
    from
        role_permissions p1_0 
    join
        permissions p1_1 
            on p1_1.permission_id=p1_0.permission_id 
    where
        p1_0.role_id=?
2025-11-25T00:55:40.622+02:00 DEBUG 16836 --- [lms-authentication] [http-nio-8081-exec-1] org.hibernate.SQL                        : 
    select
        r1_0.permission_id,
        r1_1.role_id,
        r1_1.created_at,
        r1_1.role_description,
        r1_1.role_name 
    from
        role_permissions r1_0 
    join
        roles r1_1 
            on r1_1.role_id=r1_0.role_id 
    where
        r1_0.permission_id=?
2025-11-25T00:55:40.624+02:00 DEBUG 16836 --- [lms-authentication] [http-nio-8081-exec-1] org.hibernate.SQL                        : 
    select
        r1_0.permission_id,
        r1_1.role_id,
        r1_1.created_at,
        r1_1.role_description,
        r1_1.role_name 
    from
        role_permissions r1_0 
    join
        roles r1_1 
            on r1_1.role_id=r1_0.role_id 
    where
        r1_0.permission_id=?
2025-11-25T00:55:40.627+02:00 DEBUG 16836 --- [lms-authentication] [http-nio-8081-exec-1] org.hibernate.SQL                        : 
    select
        u1_0.role_id,
        u1_1.user_id,
        u1_1.campus_id,
        u1_1.created_at,
        u1_1.deleted_at,
        u1_1.email,
        u1_1.email_verified,
        u1_1.first_name,
        u1_1.last_login_at,
        u1_1.last_name,
        u1_1.password_hash,
        u1_1.phone,
        u1_1.profile_picture_url,
        u1_1.status,
        tfa1_0.auth_id,
        tfa1_0.backup_codes,
        tfa1_0.created_at,
        tfa1_0.enabled,
        tfa1_0.last_used_at,
        tfa1_0.secret_key,
        tfa1_0.updated_at,
        tfa1_0.user_id,
        u1_1.updated_at 
    from
        user_roles u1_0 
    join
        users u1_1 
            on u1_1.user_id=u1_0.user_id 
    left join
        two_factor_auth tfa1_0 
            on u1_1.user_id=tfa1_0.user_id 
    where
        u1_0.role_id=?
2025-11-25T00:55:40.629+02:00 DEBUG 16836 --- [lms-authentication] [http-nio-8081-exec-1] org.hibernate.SQL                        : 
    select
        r1_0.user_id,
        r1_1.role_id,
        r1_1.created_at,
        r1_1.role_description,
        r1_1.role_name 
    from
        user_roles r1_0 
    join
        roles r1_1 
            on r1_1.role_id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-11-25T00:55:40.631+02:00 DEBUG 16836 --- [lms-authentication] [http-nio-8081-exec-1] org.hibernate.SQL                        : 
    select
        u1_0.role_id,
        u1_1.user_id,
        u1_1.campus_id,
        u1_1.created_at,
        u1_1.deleted_at,
        u1_1.email,
        u1_1.email_verified,
        u1_1.first_name,
        u1_1.last_login_at,
        u1_1.last_name,
        u1_1.password_hash,
        u1_1.phone,
        u1_1.profile_picture_url,
        u1_1.status,
        tfa1_0.auth_id,
        tfa1_0.backup_codes,
        tfa1_0.created_at,
        tfa1_0.enabled,
        tfa1_0.last_used_at,
        tfa1_0.secret_key,
        tfa1_0.updated_at,
        tfa1_0.user_id,
        u1_1.updated_at 
    from
        user_roles u1_0 
    join
        users u1_1 
            on u1_1.user_id=u1_0.user_id 
    left join
        two_factor_auth tfa1_0 
            on u1_1.user_id=tfa1_0.user_id 
    where
        u1_0.role_id=?
2025-11-25T00:55:40.634+02:00 DEBUG 16836 --- [lms-authentication] [http-nio-8081-exec-1] org.hibernate.SQL                        : 
    select
        p1_0.role_id,
        p1_1.permission_id,
        p1_1.created_at,
        p1_1.module,
        p1_1.permission_description,
        p1_1.permission_name 
    from
        role_permissions p1_0 
    join
        permissions p1_1 
            on p1_1.permission_id=p1_0.permission_id 
    where
        p1_0.role_id=?
2025-11-25T00:55:40.635+02:00 DEBUG 16836 --- [lms-authentication] [http-nio-8081-exec-1] org.hibernate.SQL                        : 
    select
        r1_0.permission_id,
        r1_1.role_id,
        r1_1.created_at,
        r1_1.role_description,
        r1_1.role_name 
    from
        role_permissions r1_0 
    join
        roles r1_1 
            on r1_1.role_id=r1_0.role_id 
    where
        r1_0.permission_id=?
2025-11-25T00:55:40.637+02:00 DEBUG 16836 --- [lms-authentication] [http-nio-8081-exec-1] org.hibernate.SQL                        : 
    select
        r1_0.permission_id,
        r1_1.role_id,
        r1_1.created_at,
        r1_1.role_description,
        r1_1.role_name 
    from
        role_permissions r1_0 
    join
        roles r1_1 
            on r1_1.role_id=r1_0.role_id 
    where
        r1_0.permission_id=?
2025-11-25T00:55:40.639+02:00 DEBUG 16836 --- [lms-authentication] [http-nio-8081-exec-1] org.hibernate.SQL                        : 
    select
        p1_0.role_id,
        p1_1.permission_id,
        p1_1.created_at,
        p1_1.module,
        p1_1.permission_description,
        p1_1.permission_name 
    from
        role_permissions p1_0 
    join
        permissions p1_1 
            on p1_1.permission_id=p1_0.permission_id 
    where
        p1_0.role_id=?
2025-11-25T00:55:40.643+02:00 DEBUG 16836 --- [lms-authentication] [http-nio-8081-exec-1] org.hibernate.SQL                        : 
    select
        s1_0.user_id,
        s1_0.session_id,
        s1_0.created_at,
        s1_0.device_type,
        s1_0.expires_at,
        s1_0.ip_address,
        s1_0.session_token,
        s1_0.user_agent 
    from
        sessions s1_0 
    where
        s1_0.user_id=?
2025-11-25T00:55:40.648+02:00 DEBUG 16836 --- [lms-authentication] [http-nio-8081-exec-1] org.hibernate.SQL                        : 
    select
        r1_0.user_id,
        r1_1.role_id,
        r1_1.created_at,
        r1_1.role_description,
        r1_1.role_name 
    from
        user_roles r1_0 
    join
        roles r1_1 
            on r1_1.role_id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-11-25T00:55:40.651+02:00 DEBUG 16836 --- [lms-authentication] [http-nio-8081-exec-1] org.hibernate.SQL                        : 
    select
        s1_0.user_id,
        s1_0.session_id,
        s1_0.created_at,
        s1_0.device_type,
        s1_0.expires_at,
        s1_0.ip_address,
        s1_0.session_token,
        s1_0.user_agent 
    from
        sessions s1_0 
    where
        s1_0.user_id=?
2025-11-25T00:55:40.652+02:00 DEBUG 16836 --- [lms-authentication] [http-nio-8081-exec-1] org.hibernate.SQL                        : 
    select
        u1_0.role_id,
        u1_1.user_id,
        u1_1.campus_id,
        u1_1.created_at,
        u1_1.deleted_at,
        u1_1.email,
        u1_1.email_verified,
        u1_1.first_name,
        u1_1.last_login_at,
        u1_1.last_name,
        u1_1.password_hash,
        u1_1.phone,
        u1_1.profile_picture_url,
        u1_1.status,
        tfa1_0.auth_id,
        tfa1_0.backup_codes,
        tfa1_0.created_at,
        tfa1_0.enabled,
        tfa1_0.last_used_at,
        tfa1_0.secret_key,
        tfa1_0.updated_at,
        tfa1_0.user_id,
        u1_1.updated_at 
    from
        user_roles u1_0 
    join
        users u1_1 
            on u1_1.user_id=u1_0.user_id 
    left join
        two_factor_auth tfa1_0 
            on u1_1.user_id=tfa1_0.user_id 
    where
        u1_0.role_id=?
2025-11-25T00:55:40.654+02:00 DEBUG 16836 --- [lms-authentication] [http-nio-8081-exec-1] org.hibernate.SQL                        : 
    select
        p1_0.role_id,
        p1_1.permission_id,
        p1_1.created_at,
        p1_1.module,
        p1_1.permission_description,
        p1_1.permission_name 
    from
        role_permissions p1_0 
    join
        permissions p1_1 
            on p1_1.permission_id=p1_0.permission_id 
    where
        p1_0.role_id=?
2025-11-25T00:55:40.655+02:00 DEBUG 16836 --- [lms-authentication] [http-nio-8081-exec-1] org.hibernate.SQL                        : 
    select
        r1_0.permission_id,
        r1_1.role_id,
        r1_1.created_at,
        r1_1.role_description,
        r1_1.role_name 
    from
        role_permissions r1_0 
    join
        roles r1_1 
            on r1_1.role_id=r1_0.role_id 
    where
        r1_0.permission_id=?
2025-11-25T00:55:40.657+02:00 DEBUG 16836 --- [lms-authentication] [http-nio-8081-exec-1] org.hibernate.SQL                        : 
    select
        p1_0.role_id,
        p1_1.permission_id,
        p1_1.created_at,
        p1_1.module,
        p1_1.permission_description,
        p1_1.permission_name 
    from
        role_permissions p1_0 
    join
        permissions p1_1 
            on p1_1.permission_id=p1_0.permission_id 
    where
        p1_0.role_id=?
2025-11-25T00:55:40.659+02:00 DEBUG 16836 --- [lms-authentication] [http-nio-8081-exec-1] org.hibernate.SQL                        : 
    select
        r1_0.permission_id,
        r1_1.role_id,
        r1_1.created_at,
        r1_1.role_description,
        r1_1.role_name 
    from
        role_permissions r1_0 
    join
        roles r1_1 
            on r1_1.role_id=r1_0.role_id 
    where
        r1_0.permission_id=?
2025-11-25T00:55:40.661+02:00 DEBUG 16836 --- [lms-authentication] [http-nio-8081-exec-1] org.hibernate.SQL                        : 
    select
        r1_0.permission_id,
        r1_1.role_id,
        r1_1.created_at,
        r1_1.role_description,
        r1_1.role_name 
    from
        role_permissions r1_0 
    join
        roles r1_1 
            on r1_1.role_id=r1_0.role_id 
    where
        r1_0.permission_id=?
2025-11-25T00:55:40.662+02:00 DEBUG 16836 --- [lms-authentication] [http-nio-8081-exec-1] org.hibernate.SQL                        : 
    select
        s1_0.user_id,
        s1_0.session_id,
        s1_0.created_at,
        s1_0.device_type,
        s1_0.expires_at,
        s1_0.ip_address,
        s1_0.session_token,
        s1_0.user_agent 
    from
        sessions s1_0 
    where
        s1_0.user_id=?
2025-11-25T00:55:40.665+02:00 DEBUG 16836 --- [lms-authentication] [http-nio-8081-exec-1] org.hibernate.SQL                        : 
    select
        s1_0.user_id,
        s1_0.session_id,
        s1_0.created_at,
        s1_0.device_type,
        s1_0.expires_at,
        s1_0.ip_address,
        s1_0.session_token,
        s1_0.user_agent 
    from
        sessions s1_0 
    where
        s1_0.user_id=?
2025-11-25T00:55:40.666+02:00 DEBUG 16836 --- [lms-authentication] [http-nio-8081-exec-1] org.hibernate.SQL                        : 
    select
        r1_0.user_id,
        r1_1.role_id,
        r1_1.created_at,
        r1_1.role_description,
        r1_1.role_name 
    from
        user_roles r1_0 
    join
        roles r1_1 
            on r1_1.role_id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-11-25T00:55:40.667+02:00 DEBUG 16836 --- [lms-authentication] [http-nio-8081-exec-1] org.hibernate.SQL                        : 
    select
        s1_0.user_id,
        s1_0.session_id,
        s1_0.created_at,
        s1_0.device_type,
        s1_0.expires_at,
        s1_0.ip_address,
        s1_0.session_token,
        s1_0.user_agent 
    from
        sessions s1_0 
    where
        s1_0.user_id=?
2025-11-25T00:55:40.668+02:00 DEBUG 16836 --- [lms-authentication] [http-nio-8081-exec-1] org.hibernate.SQL                        : 
    select
        r1_0.user_id,
        r1_1.role_id,
        r1_1.created_at,
        r1_1.role_description,
        r1_1.role_name 
    from
        user_roles r1_0 
    join
        roles r1_1 
            on r1_1.role_id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-11-25T00:55:40.669+02:00 DEBUG 16836 --- [lms-authentication] [http-nio-8081-exec-1] org.hibernate.SQL                        : 
    select
        s1_0.user_id,
        s1_0.session_id,
        s1_0.created_at,
        s1_0.device_type,
        s1_0.expires_at,
        s1_0.ip_address,
        s1_0.session_token,
        s1_0.user_agent 
    from
        sessions s1_0 
    where
        s1_0.user_id=?
2025-11-25T00:55:40.671+02:00 DEBUG 16836 --- [lms-authentication] [http-nio-8081-exec-1] org.hibernate.SQL                        : 
    select
        s1_0.user_id,
        s1_0.session_id,
        s1_0.created_at,
        s1_0.device_type,
        s1_0.expires_at,
        s1_0.ip_address,
        s1_0.session_token,
        s1_0.user_agent 
    from
        sessions s1_0 
    where
        s1_0.user_id=?
2025-11-25T00:55:40.673+02:00 DEBUG 16836 --- [lms-authentication] [http-nio-8081-exec-1] org.hibernate.SQL                        : 
    select
        r1_0.user_id,
        r1_1.role_id,
        r1_1.created_at,
        r1_1.role_description,
        r1_1.role_name 
    from
        user_roles r1_0 
    join
        roles r1_1 
            on r1_1.role_id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-11-25T00:55:40.674+02:00 DEBUG 16836 --- [lms-authentication] [http-nio-8081-exec-1] org.hibernate.SQL                        : 
    select
        s1_0.user_id,
        s1_0.session_id,
        s1_0.created_at,
        s1_0.device_type,
        s1_0.expires_at,
        s1_0.ip_address,
        s1_0.session_token,
        s1_0.user_agent 
    from
        sessions s1_0 
    where
        s1_0.user_id=?
2025-11-25T00:55:40.675+02:00 DEBUG 16836 --- [lms-authentication] [http-nio-8081-exec-1] org.hibernate.SQL                        : 
    select
        r1_0.user_id,
        r1_1.role_id,
        r1_1.created_at,
        r1_1.role_description,
        r1_1.role_name 
    from
        user_roles r1_0 
    join
        roles r1_1 
            on r1_1.role_id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-11-25T00:55:40.677+02:00 DEBUG 16836 --- [lms-authentication] [http-nio-8081-exec-1] org.hibernate.SQL                        : 
    select
        s1_0.user_id,
        s1_0.session_id,
        s1_0.created_at,
        s1_0.device_type,
        s1_0.expires_at,
        s1_0.ip_address,
        s1_0.session_token,
        s1_0.user_agent 
    from
        sessions s1_0 
    where
        s1_0.user_id=?
2025-11-25T00:55:40.678+02:00 DEBUG 16836 --- [lms-authentication] [http-nio-8081-exec-1] org.hibernate.SQL                        : 
    select
        r1_0.user_id,
        r1_1.role_id,
        r1_1.created_at,
        r1_1.role_description,
        r1_1.role_name 
    from
        user_roles r1_0 
    join
        roles r1_1 
            on r1_1.role_id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-11-25T00:55:40.680+02:00 DEBUG 16836 --- [lms-authentication] [http-nio-8081-exec-1] org.hibernate.SQL                        : 
    select
        s1_0.user_id,
        s1_0.session_id,
        s1_0.created_at,
        s1_0.device_type,
        s1_0.expires_at,
        s1_0.ip_address,
        s1_0.session_token,
        s1_0.user_agent 
    from
        sessions s1_0 
    where
        s1_0.user_id=?
2025-11-25T00:55:40.682+02:00 DEBUG 16836 --- [lms-authentication] [http-nio-8081-exec-1] org.hibernate.SQL                        : 
    select
        r1_0.user_id,
        r1_1.role_id,
        r1_1.created_at,
        r1_1.role_description,
        r1_1.role_name 
    from
        user_roles r1_0 
    join
        roles r1_1 
            on r1_1.role_id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-11-25T00:55:40.683+02:00 DEBUG 16836 --- [lms-authentication] [http-nio-8081-exec-1] org.hibernate.SQL                        : 
    select
        s1_0.user_id,
        s1_0.session_id,
        s1_0.created_at,
        s1_0.device_type,
        s1_0.expires_at,
        s1_0.ip_address,
        s1_0.session_token,
        s1_0.user_agent 
    from
        sessions s1_0 
    where
        s1_0.user_id=?
2025-11-25T00:55:40.685+02:00 DEBUG 16836 --- [lms-authentication] [http-nio-8081-exec-1] org.hibernate.SQL                        : 
    select
        r1_0.user_id,
        r1_1.role_id,
        r1_1.created_at,
        r1_1.role_description,
        r1_1.role_name 
    from
        user_roles r1_0 
    join
        roles r1_1 
            on r1_1.role_id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-11-25T00:55:40.686+02:00 DEBUG 16836 --- [lms-authentication] [http-nio-8081-exec-1] org.hibernate.SQL                        : 
    select
        s1_0.user_id,
        s1_0.session_id,
        s1_0.created_at,
        s1_0.device_type,
        s1_0.expires_at,
        s1_0.ip_address,
        s1_0.session_token,
        s1_0.user_agent 
    from
        sessions s1_0 
    where
        s1_0.user_id=?
2025-11-25T00:55:40.688+02:00 DEBUG 16836 --- [lms-authentication] [http-nio-8081-exec-1] org.hibernate.SQL                        : 
    select
        r1_0.user_id,
        r1_1.role_id,
        r1_1.created_at,
        r1_1.role_description,
        r1_1.role_name 
    from
        user_roles r1_0 
    join
        roles r1_1 
            on r1_1.role_id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-11-25T00:55:40.690+02:00 DEBUG 16836 --- [lms-authentication] [http-nio-8081-exec-1] org.hibernate.SQL                        : 
    select
        s1_0.user_id,
        s1_0.session_id,
        s1_0.created_at,
        s1_0.device_type,
        s1_0.expires_at,
        s1_0.ip_address,
        s1_0.session_token,
        s1_0.user_agent 
    from
        sessions s1_0 
    where
        s1_0.user_id=?
2025-11-25T00:55:40.691+02:00 DEBUG 16836 --- [lms-authentication] [http-nio-8081-exec-1] org.hibernate.SQL                        : 
    select
        r1_0.user_id,
        r1_1.role_id,
        r1_1.created_at,
        r1_1.role_description,
        r1_1.role_name 
    from
        user_roles r1_0 
    join
        roles r1_1 
            on r1_1.role_id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-11-25T00:55:40.692+02:00 DEBUG 16836 --- [lms-authentication] [http-nio-8081-exec-1] org.hibernate.SQL                        : 
    select
        s1_0.user_id,
        s1_0.session_id,
        s1_0.created_at,
        s1_0.device_type,
        s1_0.expires_at,
        s1_0.ip_address,
        s1_0.session_token,
        s1_0.user_agent 
    from
        sessions s1_0 
    where
        s1_0.user_id=?
2025-11-25T00:55:40.693+02:00 DEBUG 16836 --- [lms-authentication] [http-nio-8081-exec-1] org.hibernate.SQL                        : 
    select
        r1_0.user_id,
        r1_1.role_id,
        r1_1.created_at,
        r1_1.role_description,
        r1_1.role_name 
    from
        user_roles r1_0 
    join
        roles r1_1 
            on r1_1.role_id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-11-25T00:55:40.695+02:00 DEBUG 16836 --- [lms-authentication] [http-nio-8081-exec-1] org.hibernate.SQL                        : 
    select
        s1_0.user_id,
        s1_0.session_id,
        s1_0.created_at,
        s1_0.device_type,
        s1_0.expires_at,
        s1_0.ip_address,
        s1_0.session_token,
        s1_0.user_agent 
    from
        sessions s1_0 
    where
        s1_0.user_id=?
2025-11-25T00:55:40.697+02:00 DEBUG 16836 --- [lms-authentication] [http-nio-8081-exec-1] org.hibernate.SQL                        : 
    select
        r1_0.user_id,
        r1_1.role_id,
        r1_1.created_at,
        r1_1.role_description,
        r1_1.role_name 
    from
        user_roles r1_0 
    join
        roles r1_1 
            on r1_1.role_id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-11-25T00:55:40.699+02:00 DEBUG 16836 --- [lms-authentication] [http-nio-8081-exec-1] org.hibernate.SQL                        : 
    select
        s1_0.user_id,
        s1_0.session_id,
        s1_0.created_at,
        s1_0.device_type,
        s1_0.expires_at,
        s1_0.ip_address,
        s1_0.session_token,
        s1_0.user_agent 
    from
        sessions s1_0 
    where
        s1_0.user_id=?
2025-11-25T00:55:40.722+02:00 DEBUG 16836 --- [lms-authentication] [http-nio-8081-exec-1] .m.m.a.ExceptionHandlerExceptionResolver : Using @ExceptionHandler com.lms.exception.GlobalExceptionHandler#handleGlobalException(Exception, WebRequest)
2025-11-25T00:55:40.738+02:00 DEBUG 16836 --- [lms-authentication] [http-nio-8081-exec-1] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-11-25T00:55:40.742+02:00 DEBUG 16836 --- [lms-authentication] [http-nio-8081-exec-1] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [GlobalExceptionHandler.ErrorResponse(timestamp=2025-11-25T00:55:40.724096700, status=500, error=Inte (truncated)...]
2025-11-25T00:55:40.751+02:00  WARN 16836 --- [lms-authentication] [http-nio-8081-exec-1] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [java.lang.RuntimeException: java.lang.StackOverflowError]
2025-11-25T00:55:40.752+02:00 DEBUG 16836 --- [lms-authentication] [http-nio-8081-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 500 INTERNAL_SERVER_ERROR
2025-11-25T01:00:43.311+02:00  INFO 16836 --- [lms-authentication] [SpringApplicationShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2025-11-25T01:00:43.315+02:00  INFO 16836 --- [lms-authentication] [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown initiated...
2025-11-25T01:00:43.323+02:00  INFO 16836 --- [lms-authentication] [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown completed.
2025-11-25T01:02:42.061+02:00  INFO 26468 --- [lms-authentication] [restartedMain] com.lms.LmsApplication                   : Starting LmsApplication using Java 17.0.12 with PID 26468 (D:\flutter_projects\try_edu_backend\backend\target\classes started by am356 in D:\flutter_projects\try_edu_backend\backend)
2025-11-25T01:02:42.064+02:00 DEBUG 26468 --- [lms-authentication] [restartedMain] com.lms.LmsApplication                   : Running with Spring Boot v3.2.0, Spring v6.1.1
2025-11-25T01:02:42.066+02:00  INFO 26468 --- [lms-authentication] [restartedMain] com.lms.LmsApplication                   : No active profile set, falling back to 1 default profile: "default"
2025-11-25T01:02:42.120+02:00  INFO 26468 --- [lms-authentication] [restartedMain] .e.DevToolsPropertyDefaultsPostProcessor : Devtools property defaults active! Set 'spring.devtools.add-properties' to 'false' to disable
2025-11-25T01:02:42.121+02:00  INFO 26468 --- [lms-authentication] [restartedMain] .e.DevToolsPropertyDefaultsPostProcessor : For additional web related logging consider setting the 'logging.level.web' property to 'DEBUG'
2025-11-25T01:02:43.081+02:00  INFO 26468 --- [lms-authentication] [restartedMain] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-11-25T01:02:43.167+02:00  INFO 26468 --- [lms-authentication] [restartedMain] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 79 ms. Found 6 JPA repository interfaces.
2025-11-25T01:02:43.933+02:00  INFO 26468 --- [lms-authentication] [restartedMain] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port 8081 (http)
2025-11-25T01:02:43.943+02:00  INFO 26468 --- [lms-authentication] [restartedMain] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2025-11-25T01:02:43.943+02:00  INFO 26468 --- [lms-authentication] [restartedMain] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.16]
2025-11-25T01:02:43.999+02:00  INFO 26468 --- [lms-authentication] [restartedMain] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2025-11-25T01:02:44.000+02:00  INFO 26468 --- [lms-authentication] [restartedMain] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 1879 ms
2025-11-25T01:02:44.312+02:00  INFO 26468 --- [lms-authentication] [restartedMain] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2025-11-25T01:02:44.369+02:00  INFO 26468 --- [lms-authentication] [restartedMain] org.hibernate.Version                    : HHH000412: Hibernate ORM core version 6.3.1.Final
2025-11-25T01:02:44.400+02:00  INFO 26468 --- [lms-authentication] [restartedMain] o.h.c.internal.RegionFactoryInitiator    : HHH000026: Second-level cache disabled
2025-11-25T01:02:44.601+02:00  INFO 26468 --- [lms-authentication] [restartedMain] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2025-11-25T01:02:44.625+02:00  INFO 26468 --- [lms-authentication] [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2025-11-25T01:02:44.773+02:00  INFO 26468 --- [lms-authentication] [restartedMain] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@10c216c5
2025-11-25T01:02:44.774+02:00  INFO 26468 --- [lms-authentication] [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2025-11-25T01:02:44.796+02:00  WARN 26468 --- [lms-authentication] [restartedMain] org.hibernate.orm.deprecation            : HHH90000025: MySQL8Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-11-25T01:02:44.797+02:00  WARN 26468 --- [lms-authentication] [restartedMain] org.hibernate.orm.deprecation            : HHH90000026: MySQL8Dialect has been deprecated; use org.hibernate.dialect.MySQLDialect instead
2025-11-25T01:02:45.593+02:00  INFO 26468 --- [lms-authentication] [restartedMain] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-11-25T01:02:45.989+02:00  INFO 26468 --- [lms-authentication] [restartedMain] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-11-25T01:02:46.234+02:00  INFO 26468 --- [lms-authentication] [restartedMain] o.s.d.j.r.query.QueryEnhancerFactory     : Hibernate is in classpath; If applicable, HQL parser will be used.
2025-11-25T01:02:46.637+02:00 DEBUG 26468 --- [lms-authentication] [restartedMain] c.lms.security.JwtAuthenticationFilter   : Filter 'jwtAuthenticationFilter' configured for use
2025-11-25T01:02:46.638+02:00 DEBUG 26468 --- [lms-authentication] [restartedMain] o.s.w.f.ServerHttpObservationFilter      : Filter 'webMvcObservationFilter' configured for use
2025-11-25T01:02:47.144+02:00  INFO 26468 --- [lms-authentication] [restartedMain] o.s.b.a.e.web.EndpointLinksResolver      : Exposing 3 endpoint(s) beneath base path '/actuator'
2025-11-25T01:02:47.351+02:00 DEBUG 26468 --- [lms-authentication] [restartedMain] s.w.s.m.m.a.RequestMappingHandlerMapping : 14 mappings in 'requestMappingHandlerMapping'
2025-11-25T01:02:47.534+02:00 DEBUG 26468 --- [lms-authentication] [restartedMain] o.s.w.s.handler.SimpleUrlHandlerMapping  : Patterns [/webjars/**, /**, /swagger-ui*/*swagger-initializer.js, /swagger-ui*/**] in 'resourceHandlerMapping'
2025-11-25T01:02:47.599+02:00  INFO 26468 --- [lms-authentication] [restartedMain] o.s.s.web.DefaultSecurityFilterChain     : Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@4e31a6ef, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@77b4554d, org.springframework.security.web.context.SecurityContextHolderFilter@2754d1a4, org.springframework.security.web.header.HeaderWriterFilter@10f5486d, org.springframework.web.filter.CorsFilter@3c9eaed0, org.springframework.security.web.authentication.logout.LogoutFilter@ef70180, com.lms.security.JwtAuthenticationFilter@117307a0, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@4d744b84, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@4fb7b8e1, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@3df73fac, org.springframework.security.web.session.SessionManagementFilter@79d5487e, org.springframework.security.web.access.ExceptionTranslationFilter@5b700546, org.springframework.security.web.access.intercept.AuthorizationFilter@353e5a57]
2025-11-25T01:02:47.718+02:00 DEBUG 26468 --- [lms-authentication] [restartedMain] s.w.s.m.m.a.RequestMappingHandlerAdapter : ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-11-25T01:02:47.756+02:00 DEBUG 26468 --- [lms-authentication] [restartedMain] .m.m.a.ExceptionHandlerExceptionResolver : ControllerAdvice beans: 2 @ExceptionHandler, 1 ResponseBodyAdvice
2025-11-25T01:02:48.082+02:00  INFO 26468 --- [lms-authentication] [restartedMain] o.s.b.d.a.OptionalLiveReloadServer       : LiveReload server is running on port 35729
2025-11-25T01:02:48.147+02:00  INFO 26468 --- [lms-authentication] [restartedMain] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port 8081 (http) with context path ''
2025-11-25T01:02:48.159+02:00  INFO 26468 --- [lms-authentication] [restartedMain] com.lms.LmsApplication                   : Started LmsApplication in 6.426 seconds (process running for 6.806)
2025-11-25T01:02:48.258+02:00 DEBUG 26468 --- [lms-authentication] [restartedMain] org.hibernate.SQL                        : 
    select
        p1_0.permission_id 
    from
        permissions p1_0 
    where
        p1_0.permission_name=? 
    limit
        ?
2025-11-25T01:02:48.278+02:00 DEBUG 26468 --- [lms-authentication] [restartedMain] org.hibernate.SQL                        : 
    select
        p1_0.permission_id 
    from
        permissions p1_0 
    where
        p1_0.permission_name=? 
    limit
        ?
2025-11-25T01:02:48.280+02:00 DEBUG 26468 --- [lms-authentication] [restartedMain] org.hibernate.SQL                        : 
    select
        p1_0.permission_id 
    from
        permissions p1_0 
    where
        p1_0.permission_name=? 
    limit
        ?
2025-11-25T01:02:48.283+02:00 DEBUG 26468 --- [lms-authentication] [restartedMain] org.hibernate.SQL                        : 
    select
        p1_0.permission_id 
    from
        permissions p1_0 
    where
        p1_0.permission_name=? 
    limit
        ?
2025-11-25T01:02:48.285+02:00 DEBUG 26468 --- [lms-authentication] [restartedMain] org.hibernate.SQL                        : 
    select
        p1_0.permission_id 
    from
        permissions p1_0 
    where
        p1_0.permission_name=? 
    limit
        ?
2025-11-25T01:02:48.287+02:00 DEBUG 26468 --- [lms-authentication] [restartedMain] org.hibernate.SQL                        : 
    select
        p1_0.permission_id 
    from
        permissions p1_0 
    where
        p1_0.permission_name=? 
    limit
        ?
2025-11-25T01:02:48.290+02:00 DEBUG 26468 --- [lms-authentication] [restartedMain] org.hibernate.SQL                        : 
    select
        p1_0.permission_id 
    from
        permissions p1_0 
    where
        p1_0.permission_name=? 
    limit
        ?
2025-11-25T01:02:48.292+02:00 DEBUG 26468 --- [lms-authentication] [restartedMain] org.hibernate.SQL                        : 
    select
        p1_0.permission_id 
    from
        permissions p1_0 
    where
        p1_0.permission_name=? 
    limit
        ?
2025-11-25T01:02:48.294+02:00 DEBUG 26468 --- [lms-authentication] [restartedMain] org.hibernate.SQL                        : 
    select
        r1_0.role_id 
    from
        roles r1_0 
    where
        r1_0.role_name=? 
    limit
        ?
2025-11-25T01:02:48.297+02:00 DEBUG 26468 --- [lms-authentication] [restartedMain] org.hibernate.SQL                        : 
    select
        r1_0.role_id 
    from
        roles r1_0 
    where
        r1_0.role_name=? 
    limit
        ?
2025-11-25T01:02:48.301+02:00 DEBUG 26468 --- [lms-authentication] [restartedMain] org.hibernate.SQL                        : 
    select
        r1_0.role_id 
    from
        roles r1_0 
    where
        r1_0.role_name=? 
    limit
        ?
2025-11-25T01:02:48.303+02:00 DEBUG 26468 --- [lms-authentication] [restartedMain] org.hibernate.SQL                        : 
    select
        r1_0.role_id 
    from
        roles r1_0 
    where
        r1_0.role_name=? 
    limit
        ?
2025-11-25T01:02:52.758+02:00  INFO 26468 --- [lms-authentication] [http-nio-8081-exec-1] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-11-25T01:02:52.758+02:00  INFO 26468 --- [lms-authentication] [http-nio-8081-exec-1] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'
2025-11-25T01:02:52.759+02:00 DEBUG 26468 --- [lms-authentication] [http-nio-8081-exec-1] o.s.web.servlet.DispatcherServlet        : Detected StandardServletMultipartResolver
2025-11-25T01:02:52.759+02:00 DEBUG 26468 --- [lms-authentication] [http-nio-8081-exec-1] o.s.web.servlet.DispatcherServlet        : Detected AcceptHeaderLocaleResolver
2025-11-25T01:02:52.759+02:00 DEBUG 26468 --- [lms-authentication] [http-nio-8081-exec-1] o.s.web.servlet.DispatcherServlet        : Detected FixedThemeResolver
2025-11-25T01:02:52.760+02:00 DEBUG 26468 --- [lms-authentication] [http-nio-8081-exec-1] o.s.web.servlet.DispatcherServlet        : Detected org.springframework.web.servlet.view.DefaultRequestToViewNameTranslator@6314b21
2025-11-25T01:02:52.760+02:00 DEBUG 26468 --- [lms-authentication] [http-nio-8081-exec-1] o.s.web.servlet.DispatcherServlet        : Detected org.springframework.web.servlet.support.SessionFlashMapManager@647678b
2025-11-25T01:02:52.760+02:00 DEBUG 26468 --- [lms-authentication] [http-nio-8081-exec-1] o.s.web.servlet.DispatcherServlet        : enableLoggingRequestDetails='false': request parameters and headers will be masked to prevent unsafe logging of potentially sensitive data
2025-11-25T01:02:52.761+02:00  INFO 26468 --- [lms-authentication] [http-nio-8081-exec-1] o.s.web.servlet.DispatcherServlet        : Completed initialization in 3 ms
2025-11-25T01:02:52.777+02:00 DEBUG 26468 --- [lms-authentication] [http-nio-8081-exec-1] o.s.security.web.FilterChainProxy        : Securing POST /api/auth/register
2025-11-25T01:02:52.790+02:00 DEBUG 26468 --- [lms-authentication] [http-nio-8081-exec-1] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2025-11-25T01:02:52.793+02:00  WARN 26468 --- [lms-authentication] [http-nio-8081-exec-1] o.s.w.s.h.HandlerMappingIntrospector     : Cache miss for REQUEST dispatch to '/api/auth/register' (previous null). Performing MatchableHandlerMapping lookup. This is logged once only at WARN level, and every time at TRACE.
2025-11-25T01:02:52.801+02:00 DEBUG 26468 --- [lms-authentication] [http-nio-8081-exec-1] o.s.security.web.FilterChainProxy        : Secured POST /api/auth/register
2025-11-25T01:02:52.803+02:00 DEBUG 26468 --- [lms-authentication] [http-nio-8081-exec-1] o.s.web.servlet.DispatcherServlet        : POST "/api/auth/register", parameters={}
2025-11-25T01:02:52.804+02:00 DEBUG 26468 --- [lms-authentication] [http-nio-8081-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.lms.controller.AuthController#register(RegisterRequest)
2025-11-25T01:02:52.880+02:00 DEBUG 26468 --- [lms-authentication] [http-nio-8081-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [RegisterRequest(email=amir123@campus.edu, password=Password@123, firstName=Amir, lastName=Doe, phone (truncated)...]
2025-11-25T01:02:52.972+02:00 DEBUG 26468 --- [lms-authentication] [http-nio-8081-exec-1] org.hibernate.SQL                        : 
    select
        case 
            when count(u1_0.user_id)>0 
                then 1 
            else 0 
        end 
    from
        users u1_0 
    where
        u1_0.email=? 
        and u1_0.deleted_at is null
2025-11-25T01:02:53.271+02:00 DEBUG 26468 --- [lms-authentication] [http-nio-8081-exec-1] org.hibernate.SQL                        : 
    select
        r1_0.role_id,
        r1_0.created_at,
        r1_0.role_description,
        r1_0.role_name 
    from
        roles r1_0 
    where
        r1_0.role_name=?
2025-11-25T01:02:53.293+02:00 DEBUG 26468 --- [lms-authentication] [http-nio-8081-exec-1] org.hibernate.SQL                        : 
    select
        p1_0.role_id,
        p1_1.permission_id,
        p1_1.created_at,
        p1_1.module,
        p1_1.permission_description,
        p1_1.permission_name 
    from
        role_permissions p1_0 
    join
        permissions p1_1 
            on p1_1.permission_id=p1_0.permission_id 
    where
        p1_0.role_id=?
2025-11-25T01:02:53.305+02:00 DEBUG 26468 --- [lms-authentication] [http-nio-8081-exec-1] org.hibernate.SQL                        : 
    select
        u1_0.role_id,
        u1_1.user_id,
        u1_1.campus_id,
        u1_1.created_at,
        u1_1.deleted_at,
        u1_1.email,
        u1_1.email_verified,
        u1_1.first_name,
        u1_1.last_login_at,
        u1_1.last_name,
        u1_1.password_hash,
        u1_1.phone,
        u1_1.profile_picture_url,
        u1_1.status,
        u1_1.updated_at 
    from
        user_roles u1_0 
    join
        users u1_1 
            on u1_1.user_id=u1_0.user_id 
    where
        u1_0.role_id=?
2025-11-25T01:02:53.313+02:00 DEBUG 26468 --- [lms-authentication] [http-nio-8081-exec-1] org.hibernate.SQL                        : 
    select
        tfa1_0.auth_id,
        tfa1_0.backup_codes,
        tfa1_0.created_at,
        tfa1_0.enabled,
        tfa1_0.last_used_at,
        tfa1_0.secret_key,
        tfa1_0.updated_at,
        tfa1_0.user_id 
    from
        two_factor_auth tfa1_0 
    where
        tfa1_0.user_id=?
2025-11-25T01:02:53.320+02:00 DEBUG 26468 --- [lms-authentication] [http-nio-8081-exec-1] org.hibernate.SQL                        : 
    select
        tfa1_0.auth_id,
        tfa1_0.backup_codes,
        tfa1_0.created_at,
        tfa1_0.enabled,
        tfa1_0.last_used_at,
        tfa1_0.secret_key,
        tfa1_0.updated_at,
        tfa1_0.user_id 
    from
        two_factor_auth tfa1_0 
    where
        tfa1_0.user_id=?
2025-11-25T01:02:53.323+02:00 DEBUG 26468 --- [lms-authentication] [http-nio-8081-exec-1] org.hibernate.SQL                        : 
    select
        tfa1_0.auth_id,
        tfa1_0.backup_codes,
        tfa1_0.created_at,
        tfa1_0.enabled,
        tfa1_0.last_used_at,
        tfa1_0.secret_key,
        tfa1_0.updated_at,
        tfa1_0.user_id 
    from
        two_factor_auth tfa1_0 
    where
        tfa1_0.user_id=?
2025-11-25T01:02:53.327+02:00 DEBUG 26468 --- [lms-authentication] [http-nio-8081-exec-1] org.hibernate.SQL                        : 
    select
        tfa1_0.auth_id,
        tfa1_0.backup_codes,
        tfa1_0.created_at,
        tfa1_0.enabled,
        tfa1_0.last_used_at,
        tfa1_0.secret_key,
        tfa1_0.updated_at,
        tfa1_0.user_id 
    from
        two_factor_auth tfa1_0 
    where
        tfa1_0.user_id=?
2025-11-25T01:02:53.331+02:00 DEBUG 26468 --- [lms-authentication] [http-nio-8081-exec-1] org.hibernate.SQL                        : 
    select
        tfa1_0.auth_id,
        tfa1_0.backup_codes,
        tfa1_0.created_at,
        tfa1_0.enabled,
        tfa1_0.last_used_at,
        tfa1_0.secret_key,
        tfa1_0.updated_at,
        tfa1_0.user_id 
    from
        two_factor_auth tfa1_0 
    where
        tfa1_0.user_id=?
2025-11-25T01:02:53.334+02:00 DEBUG 26468 --- [lms-authentication] [http-nio-8081-exec-1] org.hibernate.SQL                        : 
    select
        tfa1_0.auth_id,
        tfa1_0.backup_codes,
        tfa1_0.created_at,
        tfa1_0.enabled,
        tfa1_0.last_used_at,
        tfa1_0.secret_key,
        tfa1_0.updated_at,
        tfa1_0.user_id 
    from
        two_factor_auth tfa1_0 
    where
        tfa1_0.user_id=?
2025-11-25T01:02:53.337+02:00 DEBUG 26468 --- [lms-authentication] [http-nio-8081-exec-1] org.hibernate.SQL                        : 
    select
        tfa1_0.auth_id,
        tfa1_0.backup_codes,
        tfa1_0.created_at,
        tfa1_0.enabled,
        tfa1_0.last_used_at,
        tfa1_0.secret_key,
        tfa1_0.updated_at,
        tfa1_0.user_id 
    from
        two_factor_auth tfa1_0 
    where
        tfa1_0.user_id=?
2025-11-25T01:02:53.340+02:00 DEBUG 26468 --- [lms-authentication] [http-nio-8081-exec-1] org.hibernate.SQL                        : 
    select
        tfa1_0.auth_id,
        tfa1_0.backup_codes,
        tfa1_0.created_at,
        tfa1_0.enabled,
        tfa1_0.last_used_at,
        tfa1_0.secret_key,
        tfa1_0.updated_at,
        tfa1_0.user_id 
    from
        two_factor_auth tfa1_0 
    where
        tfa1_0.user_id=?
2025-11-25T01:02:53.343+02:00 DEBUG 26468 --- [lms-authentication] [http-nio-8081-exec-1] org.hibernate.SQL                        : 
    select
        tfa1_0.auth_id,
        tfa1_0.backup_codes,
        tfa1_0.created_at,
        tfa1_0.enabled,
        tfa1_0.last_used_at,
        tfa1_0.secret_key,
        tfa1_0.updated_at,
        tfa1_0.user_id 
    from
        two_factor_auth tfa1_0 
    where
        tfa1_0.user_id=?
2025-11-25T01:02:53.347+02:00 DEBUG 26468 --- [lms-authentication] [http-nio-8081-exec-1] org.hibernate.SQL                        : 
    select
        tfa1_0.auth_id,
        tfa1_0.backup_codes,
        tfa1_0.created_at,
        tfa1_0.enabled,
        tfa1_0.last_used_at,
        tfa1_0.secret_key,
        tfa1_0.updated_at,
        tfa1_0.user_id 
    from
        two_factor_auth tfa1_0 
    where
        tfa1_0.user_id=?
2025-11-25T01:02:53.350+02:00 DEBUG 26468 --- [lms-authentication] [http-nio-8081-exec-1] org.hibernate.SQL                        : 
    select
        r1_0.user_id,
        r1_1.role_id,
        r1_1.created_at,
        p1_0.role_id,
        p1_1.permission_id,
        p1_1.created_at,
        p1_1.module,
        p1_1.permission_description,
        p1_1.permission_name,
        r1_1.role_description,
        r1_1.role_name 
    from
        user_roles r1_0 
    join
        roles r1_1 
            on r1_1.role_id=r1_0.role_id 
    left join
        (role_permissions p1_0 
    join
        permissions p1_1 
            on p1_1.permission_id=p1_0.permission_id) 
        on r1_1.role_id=p1_0.role_id 
    where
        r1_0.user_id=?
2025-11-25T01:02:53.361+02:00 DEBUG 26468 --- [lms-authentication] [http-nio-8081-exec-1] org.hibernate.SQL                        : 
    select
        r1_0.user_id,
        r1_1.role_id,
        r1_1.created_at,
        p1_0.role_id,
        p1_1.permission_id,
        p1_1.created_at,
        p1_1.module,
        p1_1.permission_description,
        p1_1.permission_name,
        r1_1.role_description,
        r1_1.role_name 
    from
        user_roles r1_0 
    join
        roles r1_1 
            on r1_1.role_id=r1_0.role_id 
    left join
        (role_permissions p1_0 
    join
        permissions p1_1 
            on p1_1.permission_id=p1_0.permission_id) 
        on r1_1.role_id=p1_0.role_id 
    where
        r1_0.user_id=?
2025-11-25T01:02:53.364+02:00 DEBUG 26468 --- [lms-authentication] [http-nio-8081-exec-1] org.hibernate.SQL                        : 
    select
        r1_0.user_id,
        r1_1.role_id,
        r1_1.created_at,
        p1_0.role_id,
        p1_1.permission_id,
        p1_1.created_at,
        p1_1.module,
        p1_1.permission_description,
        p1_1.permission_name,
        r1_1.role_description,
        r1_1.role_name 
    from
        user_roles r1_0 
    join
        roles r1_1 
            on r1_1.role_id=r1_0.role_id 
    left join
        (role_permissions p1_0 
    join
        permissions p1_1 
            on p1_1.permission_id=p1_0.permission_id) 
        on r1_1.role_id=p1_0.role_id 
    where
        r1_0.user_id=?
2025-11-25T01:02:53.368+02:00 DEBUG 26468 --- [lms-authentication] [http-nio-8081-exec-1] org.hibernate.SQL                        : 
    select
        r1_0.user_id,
        r1_1.role_id,
        r1_1.created_at,
        p1_0.role_id,
        p1_1.permission_id,
        p1_1.created_at,
        p1_1.module,
        p1_1.permission_description,
        p1_1.permission_name,
        r1_1.role_description,
        r1_1.role_name 
    from
        user_roles r1_0 
    join
        roles r1_1 
            on r1_1.role_id=r1_0.role_id 
    left join
        (role_permissions p1_0 
    join
        permissions p1_1 
            on p1_1.permission_id=p1_0.permission_id) 
        on r1_1.role_id=p1_0.role_id 
    where
        r1_0.user_id=?
2025-11-25T01:02:53.371+02:00 DEBUG 26468 --- [lms-authentication] [http-nio-8081-exec-1] org.hibernate.SQL                        : 
    select
        r1_0.user_id,
        r1_1.role_id,
        r1_1.created_at,
        p1_0.role_id,
        p1_1.permission_id,
        p1_1.created_at,
        p1_1.module,
        p1_1.permission_description,
        p1_1.permission_name,
        r1_1.role_description,
        r1_1.role_name 
    from
        user_roles r1_0 
    join
        roles r1_1 
            on r1_1.role_id=r1_0.role_id 
    left join
        (role_permissions p1_0 
    join
        permissions p1_1 
            on p1_1.permission_id=p1_0.permission_id) 
        on r1_1.role_id=p1_0.role_id 
    where
        r1_0.user_id=?
2025-11-25T01:02:53.373+02:00 DEBUG 26468 --- [lms-authentication] [http-nio-8081-exec-1] org.hibernate.SQL                        : 
    select
        r1_0.user_id,
        r1_1.role_id,
        r1_1.created_at,
        p1_0.role_id,
        p1_1.permission_id,
        p1_1.created_at,
        p1_1.module,
        p1_1.permission_description,
        p1_1.permission_name,
        r1_1.role_description,
        r1_1.role_name 
    from
        user_roles r1_0 
    join
        roles r1_1 
            on r1_1.role_id=r1_0.role_id 
    left join
        (role_permissions p1_0 
    join
        permissions p1_1 
            on p1_1.permission_id=p1_0.permission_id) 
        on r1_1.role_id=p1_0.role_id 
    where
        r1_0.user_id=?
2025-11-25T01:02:53.376+02:00 DEBUG 26468 --- [lms-authentication] [http-nio-8081-exec-1] org.hibernate.SQL                        : 
    select
        r1_0.user_id,
        r1_1.role_id,
        r1_1.created_at,
        p1_0.role_id,
        p1_1.permission_id,
        p1_1.created_at,
        p1_1.module,
        p1_1.permission_description,
        p1_1.permission_name,
        r1_1.role_description,
        r1_1.role_name 
    from
        user_roles r1_0 
    join
        roles r1_1 
            on r1_1.role_id=r1_0.role_id 
    left join
        (role_permissions p1_0 
    join
        permissions p1_1 
            on p1_1.permission_id=p1_0.permission_id) 
        on r1_1.role_id=p1_0.role_id 
    where
        r1_0.user_id=?
2025-11-25T01:02:53.379+02:00 DEBUG 26468 --- [lms-authentication] [http-nio-8081-exec-1] org.hibernate.SQL                        : 
    select
        r1_0.user_id,
        r1_1.role_id,
        r1_1.created_at,
        p1_0.role_id,
        p1_1.permission_id,
        p1_1.created_at,
        p1_1.module,
        p1_1.permission_description,
        p1_1.permission_name,
        r1_1.role_description,
        r1_1.role_name 
    from
        user_roles r1_0 
    join
        roles r1_1 
            on r1_1.role_id=r1_0.role_id 
    left join
        (role_permissions p1_0 
    join
        permissions p1_1 
            on p1_1.permission_id=p1_0.permission_id) 
        on r1_1.role_id=p1_0.role_id 
    where
        r1_0.user_id=?
2025-11-25T01:02:53.383+02:00 DEBUG 26468 --- [lms-authentication] [http-nio-8081-exec-1] org.hibernate.SQL                        : 
    select
        r1_0.user_id,
        r1_1.role_id,
        r1_1.created_at,
        p1_0.role_id,
        p1_1.permission_id,
        p1_1.created_at,
        p1_1.module,
        p1_1.permission_description,
        p1_1.permission_name,
        r1_1.role_description,
        r1_1.role_name 
    from
        user_roles r1_0 
    join
        roles r1_1 
            on r1_1.role_id=r1_0.role_id 
    left join
        (role_permissions p1_0 
    join
        permissions p1_1 
            on p1_1.permission_id=p1_0.permission_id) 
        on r1_1.role_id=p1_0.role_id 
    where
        r1_0.user_id=?
2025-11-25T01:02:53.385+02:00 DEBUG 26468 --- [lms-authentication] [http-nio-8081-exec-1] org.hibernate.SQL                        : 
    select
        r1_0.user_id,
        r1_1.role_id,
        r1_1.created_at,
        p1_0.role_id,
        p1_1.permission_id,
        p1_1.created_at,
        p1_1.module,
        p1_1.permission_description,
        p1_1.permission_name,
        r1_1.role_description,
        r1_1.role_name 
    from
        user_roles r1_0 
    join
        roles r1_1 
            on r1_1.role_id=r1_0.role_id 
    left join
        (role_permissions p1_0 
    join
        permissions p1_1 
            on p1_1.permission_id=p1_0.permission_id) 
        on r1_1.role_id=p1_0.role_id 
    where
        r1_0.user_id=?
2025-11-25T01:02:53.420+02:00 DEBUG 26468 --- [lms-authentication] [http-nio-8081-exec-1] org.hibernate.SQL                        : 
    insert 
    into
        users
        (campus_id, created_at, deleted_at, email, email_verified, first_name, last_login_at, last_name, password_hash, phone, profile_picture_url, status, updated_at) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
2025-11-25T01:02:53.471+02:00  INFO 26468 --- [lms-authentication] [http-nio-8081-exec-1] com.lms.service.AuthService              : New user registered: amir123@campus.edu
2025-11-25T01:02:53.591+02:00 DEBUG 26468 --- [lms-authentication] [http-nio-8081-exec-1] org.hibernate.SQL                        : 
    insert 
    into
        sessions
        (created_at, device_type, expires_at, ip_address, session_token, user_id, user_agent) 
    values
        (?, ?, ?, ?, ?, ?, ?)
2025-11-25T01:02:53.626+02:00 DEBUG 26468 --- [lms-authentication] [http-nio-8081-exec-1] org.hibernate.SQL                        : 
    insert 
    into
        user_roles
        (user_id, role_id) 
    values
        (?, ?)
2025-11-25T01:02:53.649+02:00 DEBUG 26468 --- [lms-authentication] [http-nio-8081-exec-1] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-11-25T01:02:53.654+02:00 DEBUG 26468 --- [lms-authentication] [http-nio-8081-exec-1] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [AuthResponse(accessToken=eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhbWlyMTIzQGNhbXB1cy5lZHUiLCJ1c2VySWQiOjE3LC (truncated)...]
2025-11-25T01:02:53.664+02:00 DEBUG 26468 --- [lms-authentication] [http-nio-8081-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 201 CREATED
2025-11-25T01:02:54.308+02:00 ERROR 26468 --- [lms-authentication] [async-1] com.lms.service.EmailService             : Failed to send verification email to: amir123@campus.edu

org.springframework.mail.MailSendException: Mail server connection failed. Failed messages: jakarta.mail.MessagingException: Could not convert socket to TLS;
  nested exception is:
	javax.net.ssl.SSLHandshakeException: PKIX path building failed: sun.security.provider.certpath.SunCertPathBuilderException: unable to find valid certification path to requested target
	at org.springframework.mail.javamail.JavaMailSenderImpl.doSend(JavaMailSenderImpl.java:410) ~[spring-context-support-6.1.1.jar:6.1.1]
	at org.springframework.mail.javamail.JavaMailSenderImpl.send(JavaMailSenderImpl.java:317) ~[spring-context-support-6.1.1.jar:6.1.1]
	at org.springframework.mail.MailSender.send(MailSender.java:42) ~[spring-context-support-6.1.1.jar:6.1.1]
	at com.lms.service.EmailService.sendVerificationEmail(EmailService.java:45) ~[classes/:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77) ~[na:na]
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:568) ~[na:na]
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:352) ~[spring-aop-6.1.1.jar:6.1.1]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196) ~[spring-aop-6.1.1.jar:6.1.1]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163) ~[spring-aop-6.1.1.jar:6.1.1]
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:765) ~[spring-aop-6.1.1.jar:6.1.1]
	at org.springframework.aop.interceptor.AsyncExecutionInterceptor.lambda$invoke$0(AsyncExecutionInterceptor.java:115) ~[spring-aop-6.1.1.jar:6.1.1]
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264) ~[na:na]
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1136) ~[na:na]
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:635) ~[na:na]
	at java.base/java.lang.Thread.run(Thread.java:842) ~[na:na]
Caused by: jakarta.mail.MessagingException: Could not convert socket to TLS
	at org.eclipse.angus.mail.smtp.SMTPTransport.startTLS(SMTPTransport.java:2173) ~[jakarta.mail-2.0.2.jar:na]
	at org.eclipse.angus.mail.smtp.SMTPTransport.protocolConnect(SMTPTransport.java:741) ~[jakarta.mail-2.0.2.jar:na]
	at jakarta.mail.Service.connect(Service.java:345) ~[jakarta.mail-2.0.2.jar:na]
	at org.springframework.mail.javamail.JavaMailSenderImpl.connectTransport(JavaMailSenderImpl.java:480) ~[spring-context-support-6.1.1.jar:6.1.1]
	at org.springframework.mail.javamail.JavaMailSenderImpl.doSend(JavaMailSenderImpl.java:399) ~[spring-context-support-6.1.1.jar:6.1.1]
	... 16 common frames omitted
Caused by: javax.net.ssl.SSLHandshakeException: PKIX path building failed: sun.security.provider.certpath.SunCertPathBuilderException: unable to find valid certification path to requested target
	at java.base/sun.security.ssl.Alert.createSSLException(Alert.java:131) ~[na:na]
	at java.base/sun.security.ssl.TransportContext.fatal(TransportContext.java:378) ~[na:na]
	at java.base/sun.security.ssl.TransportContext.fatal(TransportContext.java:321) ~[na:na]
	at java.base/sun.security.ssl.TransportContext.fatal(TransportContext.java:316) ~[na:na]
	at java.base/sun.security.ssl.CertificateMessage$T13CertificateConsumer.checkServerCerts(CertificateMessage.java:1351) ~[na:na]
	at java.base/sun.security.ssl.CertificateMessage$T13CertificateConsumer.onConsumeCertificate(CertificateMessage.java:1226) ~[na:na]
	at java.base/sun.security.ssl.CertificateMessage$T13CertificateConsumer.consume(CertificateMessage.java:1169) ~[na:na]
	at java.base/sun.security.ssl.SSLHandshake.consume(SSLHandshake.java:396) ~[na:na]
	at java.base/sun.security.ssl.HandshakeContext.dispatch(HandshakeContext.java:480) ~[na:na]
	at java.base/sun.security.ssl.HandshakeContext.dispatch(HandshakeContext.java:458) ~[na:na]
	at java.base/sun.security.ssl.TransportContext.dispatch(TransportContext.java:201) ~[na:na]
	at java.base/sun.security.ssl.SSLTransport.decode(SSLTransport.java:172) ~[na:na]
	at java.base/sun.security.ssl.SSLSocketImpl.decode(SSLSocketImpl.java:1506) ~[na:na]
	at java.base/sun.security.ssl.SSLSocketImpl.readHandshakeRecord(SSLSocketImpl.java:1421) ~[na:na]
	at java.base/sun.security.ssl.SSLSocketImpl.startHandshake(SSLSocketImpl.java:455) ~[na:na]
	at java.base/sun.security.ssl.SSLSocketImpl.startHandshake(SSLSocketImpl.java:426) ~[na:na]
	at org.eclipse.angus.mail.util.SocketFetcher.configureSSLSocket(SocketFetcher.java:628) ~[jakarta.mail-2.0.2.jar:na]
	at org.eclipse.angus.mail.util.SocketFetcher.startTLS(SocketFetcher.java:555) ~[jakarta.mail-2.0.2.jar:na]
	at org.eclipse.angus.mail.smtp.SMTPTransport.startTLS(SMTPTransport.java:2168) ~[jakarta.mail-2.0.2.jar:na]
	... 20 common frames omitted
Caused by: sun.security.validator.ValidatorException: PKIX path building failed: sun.security.provider.certpath.SunCertPathBuilderException: unable to find valid certification path to requested target
	at java.base/sun.security.validator.PKIXValidator.doBuild(PKIXValidator.java:439) ~[na:na]
	at java.base/sun.security.validator.PKIXValidator.engineValidate(PKIXValidator.java:306) ~[na:na]
	at java.base/sun.security.validator.Validator.validate(Validator.java:264) ~[na:na]
	at java.base/sun.security.ssl.X509TrustManagerImpl.checkTrusted(X509TrustManagerImpl.java:231) ~[na:na]
	at java.base/sun.security.ssl.X509TrustManagerImpl.checkServerTrusted(X509TrustManagerImpl.java:132) ~[na:na]
	at java.base/sun.security.ssl.CertificateMessage$T13CertificateConsumer.checkServerCerts(CertificateMessage.java:1335) ~[na:na]
	... 34 common frames omitted
Caused by: sun.security.provider.certpath.SunCertPathBuilderException: unable to find valid certification path to requested target
	at java.base/sun.security.provider.certpath.SunCertPathBuilder.build(SunCertPathBuilder.java:148) ~[na:na]
	at java.base/sun.security.provider.certpath.SunCertPathBuilder.engineBuild(SunCertPathBuilder.java:129) ~[na:na]
	at java.base/java.security.cert.CertPathBuilder.build(CertPathBuilder.java:297) ~[na:na]
	at java.base/sun.security.validator.PKIXValidator.doBuild(PKIXValidator.java:434) ~[na:na]
	... 39 common frames omitted

2025-11-25T01:06:15.059+02:00 DEBUG 26468 --- [lms-authentication] [http-nio-8081-exec-2] o.s.security.web.FilterChainProxy        : Securing POST /api/auth/login
2025-11-25T01:06:15.061+02:00 DEBUG 26468 --- [lms-authentication] [http-nio-8081-exec-2] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2025-11-25T01:06:15.062+02:00 DEBUG 26468 --- [lms-authentication] [http-nio-8081-exec-2] o.s.security.web.FilterChainProxy        : Secured POST /api/auth/login
2025-11-25T01:06:15.062+02:00 DEBUG 26468 --- [lms-authentication] [http-nio-8081-exec-2] o.s.web.servlet.DispatcherServlet        : POST "/api/auth/login", parameters={}
2025-11-25T01:06:15.062+02:00 DEBUG 26468 --- [lms-authentication] [http-nio-8081-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.lms.controller.AuthController#login(LoginRequest)
2025-11-25T01:06:15.065+02:00 DEBUG 26468 --- [lms-authentication] [http-nio-8081-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [LoginRequest(email=amir123@campus.edu, password=Password@123, rememberMe=false)]
2025-11-25T01:06:15.352+02:00 DEBUG 26468 --- [lms-authentication] [http-nio-8081-exec-2] org.hibernate.SQL                        : 
    select
        u1_0.user_id,
        u1_0.campus_id,
        u1_0.created_at,
        u1_0.deleted_at,
        u1_0.email,
        u1_0.email_verified,
        u1_0.first_name,
        u1_0.last_login_at,
        u1_0.last_name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.profile_picture_url,
        r1_0.user_id,
        r1_1.role_id,
        r1_1.created_at,
        r1_1.role_description,
        r1_1.role_name,
        u1_0.status,
        u1_0.updated_at 
    from
        users u1_0 
    left join
        (user_roles r1_0 
    join
        roles r1_1 
            on r1_1.role_id=r1_0.role_id) 
        on u1_0.user_id=r1_0.user_id 
    where
        u1_0.email=? 
        and u1_0.deleted_at is null
2025-11-25T01:06:15.369+02:00 DEBUG 26468 --- [lms-authentication] [http-nio-8081-exec-2] org.hibernate.SQL                        : 
    select
        tfa1_0.auth_id,
        tfa1_0.backup_codes,
        tfa1_0.created_at,
        tfa1_0.enabled,
        tfa1_0.last_used_at,
        tfa1_0.secret_key,
        tfa1_0.updated_at,
        tfa1_0.user_id 
    from
        two_factor_auth tfa1_0 
    where
        tfa1_0.user_id=?
2025-11-25T01:06:15.371+02:00 DEBUG 26468 --- [lms-authentication] [http-nio-8081-exec-2] org.hibernate.SQL                        : 
    select
        p1_0.role_id,
        p1_1.permission_id,
        p1_1.created_at,
        p1_1.module,
        p1_1.permission_description,
        p1_1.permission_name 
    from
        role_permissions p1_0 
    join
        permissions p1_1 
            on p1_1.permission_id=p1_0.permission_id 
    where
        p1_0.role_id=?
2025-11-25T01:06:15.381+02:00 DEBUG 26468 --- [lms-authentication] [http-nio-8081-exec-2] o.s.s.a.dao.DaoAuthenticationProvider    : Failed to authenticate since user account is locked
2025-11-25T01:06:15.385+02:00 DEBUG 26468 --- [lms-authentication] [http-nio-8081-exec-2] .m.m.a.ExceptionHandlerExceptionResolver : Using @ExceptionHandler com.lms.exception.GlobalExceptionHandler#handleAuthenticationException(AuthenticationException, WebRequest)
2025-11-25T01:06:15.388+02:00 DEBUG 26468 --- [lms-authentication] [http-nio-8081-exec-2] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-11-25T01:06:15.391+02:00 DEBUG 26468 --- [lms-authentication] [http-nio-8081-exec-2] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [GlobalExceptionHandler.ErrorResponse(timestamp=2025-11-25T01:06:15.386445500, status=401, error=Unau (truncated)...]
2025-11-25T01:06:15.393+02:00  WARN 26468 --- [lms-authentication] [http-nio-8081-exec-2] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [org.springframework.security.authentication.LockedException: User account is locked]
2025-11-25T01:06:15.394+02:00 DEBUG 26468 --- [lms-authentication] [http-nio-8081-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 401 UNAUTHORIZED
2025-11-25T01:06:56.220+02:00 DEBUG 26468 --- [lms-authentication] [http-nio-8081-exec-3] o.s.security.web.FilterChainProxy        : Securing POST /api/auth/login
2025-11-25T01:06:56.221+02:00 DEBUG 26468 --- [lms-authentication] [http-nio-8081-exec-3] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2025-11-25T01:06:56.222+02:00 DEBUG 26468 --- [lms-authentication] [http-nio-8081-exec-3] o.s.security.web.FilterChainProxy        : Secured POST /api/auth/login
2025-11-25T01:06:56.224+02:00 DEBUG 26468 --- [lms-authentication] [http-nio-8081-exec-3] o.s.web.servlet.DispatcherServlet        : POST "/api/auth/login", parameters={}
2025-11-25T01:06:56.224+02:00 DEBUG 26468 --- [lms-authentication] [http-nio-8081-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.lms.controller.AuthController#login(LoginRequest)
2025-11-25T01:06:56.224+02:00 DEBUG 26468 --- [lms-authentication] [http-nio-8081-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [LoginRequest(email=amir123@campus.edu, password=Password@123, rememberMe=true)]
2025-11-25T01:06:56.229+02:00 DEBUG 26468 --- [lms-authentication] [http-nio-8081-exec-3] org.hibernate.SQL                        : 
    select
        u1_0.user_id,
        u1_0.campus_id,
        u1_0.created_at,
        u1_0.deleted_at,
        u1_0.email,
        u1_0.email_verified,
        u1_0.first_name,
        u1_0.last_login_at,
        u1_0.last_name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.profile_picture_url,
        r1_0.user_id,
        r1_1.role_id,
        r1_1.created_at,
        r1_1.role_description,
        r1_1.role_name,
        u1_0.status,
        u1_0.updated_at 
    from
        users u1_0 
    left join
        (user_roles r1_0 
    join
        roles r1_1 
            on r1_1.role_id=r1_0.role_id) 
        on u1_0.user_id=r1_0.user_id 
    where
        u1_0.email=? 
        and u1_0.deleted_at is null
2025-11-25T01:06:56.232+02:00 DEBUG 26468 --- [lms-authentication] [http-nio-8081-exec-3] org.hibernate.SQL                        : 
    select
        tfa1_0.auth_id,
        tfa1_0.backup_codes,
        tfa1_0.created_at,
        tfa1_0.enabled,
        tfa1_0.last_used_at,
        tfa1_0.secret_key,
        tfa1_0.updated_at,
        tfa1_0.user_id 
    from
        two_factor_auth tfa1_0 
    where
        tfa1_0.user_id=?
2025-11-25T01:06:56.235+02:00 DEBUG 26468 --- [lms-authentication] [http-nio-8081-exec-3] org.hibernate.SQL                        : 
    select
        p1_0.role_id,
        p1_1.permission_id,
        p1_1.created_at,
        p1_1.module,
        p1_1.permission_description,
        p1_1.permission_name 
    from
        role_permissions p1_0 
    join
        permissions p1_1 
            on p1_1.permission_id=p1_0.permission_id 
    where
        p1_0.role_id=?
2025-11-25T01:06:56.238+02:00 DEBUG 26468 --- [lms-authentication] [http-nio-8081-exec-3] o.s.s.a.dao.DaoAuthenticationProvider    : Failed to authenticate since user account is locked
2025-11-25T01:06:56.239+02:00 DEBUG 26468 --- [lms-authentication] [http-nio-8081-exec-3] .m.m.a.ExceptionHandlerExceptionResolver : Using @ExceptionHandler com.lms.exception.GlobalExceptionHandler#handleAuthenticationException(AuthenticationException, WebRequest)
2025-11-25T01:06:56.240+02:00 DEBUG 26468 --- [lms-authentication] [http-nio-8081-exec-3] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-11-25T01:06:56.240+02:00 DEBUG 26468 --- [lms-authentication] [http-nio-8081-exec-3] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [GlobalExceptionHandler.ErrorResponse(timestamp=2025-11-25T01:06:56.240097300, status=401, error=Unau (truncated)...]
2025-11-25T01:06:56.241+02:00  WARN 26468 --- [lms-authentication] [http-nio-8081-exec-3] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [org.springframework.security.authentication.LockedException: User account is locked]
2025-11-25T01:06:56.241+02:00 DEBUG 26468 --- [lms-authentication] [http-nio-8081-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 401 UNAUTHORIZED
2025-11-25T01:07:00.259+02:00  INFO 26468 --- [lms-authentication] [SpringApplicationShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2025-11-25T01:07:00.262+02:00  INFO 26468 --- [lms-authentication] [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown initiated...
2025-11-25T01:07:00.268+02:00  INFO 26468 --- [lms-authentication] [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown completed.
2025-11-25T01:07:15.597+02:00  INFO 26584 --- [lms-authentication] [restartedMain] com.lms.LmsApplication                   : Starting LmsApplication using Java 17.0.12 with PID 26584 (D:\flutter_projects\try_edu_backend\backend\target\classes started by am356 in D:\flutter_projects\try_edu_backend\backend)
2025-11-25T01:07:15.601+02:00 DEBUG 26584 --- [lms-authentication] [restartedMain] com.lms.LmsApplication                   : Running with Spring Boot v3.2.0, Spring v6.1.1
2025-11-25T01:07:15.604+02:00  INFO 26584 --- [lms-authentication] [restartedMain] com.lms.LmsApplication                   : No active profile set, falling back to 1 default profile: "default"
2025-11-25T01:07:15.687+02:00  INFO 26584 --- [lms-authentication] [restartedMain] .e.DevToolsPropertyDefaultsPostProcessor : Devtools property defaults active! Set 'spring.devtools.add-properties' to 'false' to disable
2025-11-25T01:07:15.687+02:00  INFO 26584 --- [lms-authentication] [restartedMain] .e.DevToolsPropertyDefaultsPostProcessor : For additional web related logging consider setting the 'logging.level.web' property to 'DEBUG'
2025-11-25T01:07:16.822+02:00  INFO 26584 --- [lms-authentication] [restartedMain] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-11-25T01:07:16.894+02:00  INFO 26584 --- [lms-authentication] [restartedMain] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 64 ms. Found 6 JPA repository interfaces.
2025-11-25T01:07:17.711+02:00  INFO 26584 --- [lms-authentication] [restartedMain] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port 8081 (http)
2025-11-25T01:07:17.720+02:00  INFO 26584 --- [lms-authentication] [restartedMain] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2025-11-25T01:07:17.720+02:00  INFO 26584 --- [lms-authentication] [restartedMain] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.16]
2025-11-25T01:07:17.777+02:00  INFO 26584 --- [lms-authentication] [restartedMain] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2025-11-25T01:07:17.778+02:00  INFO 26584 --- [lms-authentication] [restartedMain] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 2089 ms
2025-11-25T01:07:18.056+02:00  INFO 26584 --- [lms-authentication] [restartedMain] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2025-11-25T01:07:18.112+02:00  INFO 26584 --- [lms-authentication] [restartedMain] org.hibernate.Version                    : HHH000412: Hibernate ORM core version 6.3.1.Final
2025-11-25T01:07:18.143+02:00  INFO 26584 --- [lms-authentication] [restartedMain] o.h.c.internal.RegionFactoryInitiator    : HHH000026: Second-level cache disabled
2025-11-25T01:07:18.329+02:00  INFO 26584 --- [lms-authentication] [restartedMain] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2025-11-25T01:07:18.355+02:00  INFO 26584 --- [lms-authentication] [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2025-11-25T01:07:18.504+02:00  INFO 26584 --- [lms-authentication] [restartedMain] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@5fb3c9b3
2025-11-25T01:07:18.506+02:00  INFO 26584 --- [lms-authentication] [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2025-11-25T01:07:18.527+02:00  WARN 26584 --- [lms-authentication] [restartedMain] org.hibernate.orm.deprecation            : HHH90000025: MySQL8Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-11-25T01:07:18.529+02:00  WARN 26584 --- [lms-authentication] [restartedMain] org.hibernate.orm.deprecation            : HHH90000026: MySQL8Dialect has been deprecated; use org.hibernate.dialect.MySQLDialect instead
2025-11-25T01:07:19.392+02:00  INFO 26584 --- [lms-authentication] [restartedMain] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-11-25T01:07:19.805+02:00  INFO 26584 --- [lms-authentication] [restartedMain] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-11-25T01:07:20.062+02:00  INFO 26584 --- [lms-authentication] [restartedMain] o.s.d.j.r.query.QueryEnhancerFactory     : Hibernate is in classpath; If applicable, HQL parser will be used.
2025-11-25T01:07:20.499+02:00 DEBUG 26584 --- [lms-authentication] [restartedMain] c.lms.security.JwtAuthenticationFilter   : Filter 'jwtAuthenticationFilter' configured for use
2025-11-25T01:07:20.500+02:00 DEBUG 26584 --- [lms-authentication] [restartedMain] o.s.w.f.ServerHttpObservationFilter      : Filter 'webMvcObservationFilter' configured for use
2025-11-25T01:07:21.051+02:00  INFO 26584 --- [lms-authentication] [restartedMain] o.s.b.a.e.web.EndpointLinksResolver      : Exposing 3 endpoint(s) beneath base path '/actuator'
2025-11-25T01:07:21.293+02:00 DEBUG 26584 --- [lms-authentication] [restartedMain] s.w.s.m.m.a.RequestMappingHandlerMapping : 14 mappings in 'requestMappingHandlerMapping'
2025-11-25T01:07:21.509+02:00 DEBUG 26584 --- [lms-authentication] [restartedMain] o.s.w.s.handler.SimpleUrlHandlerMapping  : Patterns [/webjars/**, /**, /swagger-ui*/*swagger-initializer.js, /swagger-ui*/**] in 'resourceHandlerMapping'
2025-11-25T01:07:21.594+02:00  INFO 26584 --- [lms-authentication] [restartedMain] o.s.s.web.DefaultSecurityFilterChain     : Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@3bbc6ede, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@364b73c3, org.springframework.security.web.context.SecurityContextHolderFilter@405efb20, org.springframework.security.web.header.HeaderWriterFilter@758c4114, org.springframework.web.filter.CorsFilter@6fdf5583, org.springframework.security.web.authentication.logout.LogoutFilter@5b2bbd2e, com.lms.security.JwtAuthenticationFilter@2b4337a0, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@4570b976, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@43322f74, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@218df83, org.springframework.security.web.session.SessionManagementFilter@107a14f3, org.springframework.security.web.access.ExceptionTranslationFilter@9c5f375, org.springframework.security.web.access.intercept.AuthorizationFilter@338ae50b]
2025-11-25T01:07:21.749+02:00 DEBUG 26584 --- [lms-authentication] [restartedMain] s.w.s.m.m.a.RequestMappingHandlerAdapter : ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-11-25T01:07:21.790+02:00 DEBUG 26584 --- [lms-authentication] [restartedMain] .m.m.a.ExceptionHandlerExceptionResolver : ControllerAdvice beans: 2 @ExceptionHandler, 1 ResponseBodyAdvice
2025-11-25T01:07:22.224+02:00  INFO 26584 --- [lms-authentication] [restartedMain] o.s.b.d.a.OptionalLiveReloadServer       : LiveReload server is running on port 35729
2025-11-25T01:07:22.317+02:00  INFO 26584 --- [lms-authentication] [restartedMain] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port 8081 (http) with context path ''
2025-11-25T01:07:22.335+02:00  INFO 26584 --- [lms-authentication] [restartedMain] com.lms.LmsApplication                   : Started LmsApplication in 7.189 seconds (process running for 7.671)
2025-11-25T01:07:22.451+02:00 DEBUG 26584 --- [lms-authentication] [restartedMain] org.hibernate.SQL                        : 
    select
        p1_0.permission_id 
    from
        permissions p1_0 
    where
        p1_0.permission_name=? 
    limit
        ?
2025-11-25T01:07:22.477+02:00 DEBUG 26584 --- [lms-authentication] [restartedMain] org.hibernate.SQL                        : 
    select
        p1_0.permission_id 
    from
        permissions p1_0 
    where
        p1_0.permission_name=? 
    limit
        ?
2025-11-25T01:07:22.481+02:00 DEBUG 26584 --- [lms-authentication] [restartedMain] org.hibernate.SQL                        : 
    select
        p1_0.permission_id 
    from
        permissions p1_0 
    where
        p1_0.permission_name=? 
    limit
        ?
2025-11-25T01:07:22.485+02:00 DEBUG 26584 --- [lms-authentication] [restartedMain] org.hibernate.SQL                        : 
    select
        p1_0.permission_id 
    from
        permissions p1_0 
    where
        p1_0.permission_name=? 
    limit
        ?
2025-11-25T01:07:22.489+02:00 DEBUG 26584 --- [lms-authentication] [restartedMain] org.hibernate.SQL                        : 
    select
        p1_0.permission_id 
    from
        permissions p1_0 
    where
        p1_0.permission_name=? 
    limit
        ?
2025-11-25T01:07:22.492+02:00 DEBUG 26584 --- [lms-authentication] [restartedMain] org.hibernate.SQL                        : 
    select
        p1_0.permission_id 
    from
        permissions p1_0 
    where
        p1_0.permission_name=? 
    limit
        ?
2025-11-25T01:07:22.496+02:00 DEBUG 26584 --- [lms-authentication] [restartedMain] org.hibernate.SQL                        : 
    select
        p1_0.permission_id 
    from
        permissions p1_0 
    where
        p1_0.permission_name=? 
    limit
        ?
2025-11-25T01:07:22.500+02:00 DEBUG 26584 --- [lms-authentication] [restartedMain] org.hibernate.SQL                        : 
    select
        p1_0.permission_id 
    from
        permissions p1_0 
    where
        p1_0.permission_name=? 
    limit
        ?
2025-11-25T01:07:22.503+02:00 DEBUG 26584 --- [lms-authentication] [restartedMain] org.hibernate.SQL                        : 
    select
        r1_0.role_id 
    from
        roles r1_0 
    where
        r1_0.role_name=? 
    limit
        ?
2025-11-25T01:07:22.512+02:00 DEBUG 26584 --- [lms-authentication] [restartedMain] org.hibernate.SQL                        : 
    select
        r1_0.role_id 
    from
        roles r1_0 
    where
        r1_0.role_name=? 
    limit
        ?
2025-11-25T01:07:22.516+02:00 DEBUG 26584 --- [lms-authentication] [restartedMain] org.hibernate.SQL                        : 
    select
        r1_0.role_id 
    from
        roles r1_0 
    where
        r1_0.role_name=? 
    limit
        ?
2025-11-25T01:07:22.519+02:00 DEBUG 26584 --- [lms-authentication] [restartedMain] org.hibernate.SQL                        : 
    select
        r1_0.role_id 
    from
        roles r1_0 
    where
        r1_0.role_name=? 
    limit
        ?
2025-11-25T01:07:33.832+02:00  INFO 26584 --- [lms-authentication] [http-nio-8081-exec-1] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-11-25T01:07:33.832+02:00  INFO 26584 --- [lms-authentication] [http-nio-8081-exec-1] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'
2025-11-25T01:07:33.832+02:00 DEBUG 26584 --- [lms-authentication] [http-nio-8081-exec-1] o.s.web.servlet.DispatcherServlet        : Detected StandardServletMultipartResolver
2025-11-25T01:07:33.832+02:00 DEBUG 26584 --- [lms-authentication] [http-nio-8081-exec-1] o.s.web.servlet.DispatcherServlet        : Detected AcceptHeaderLocaleResolver
2025-11-25T01:07:33.832+02:00 DEBUG 26584 --- [lms-authentication] [http-nio-8081-exec-1] o.s.web.servlet.DispatcherServlet        : Detected FixedThemeResolver
2025-11-25T01:07:33.833+02:00 DEBUG 26584 --- [lms-authentication] [http-nio-8081-exec-1] o.s.web.servlet.DispatcherServlet        : Detected org.springframework.web.servlet.view.DefaultRequestToViewNameTranslator@73c7f14e
2025-11-25T01:07:33.834+02:00 DEBUG 26584 --- [lms-authentication] [http-nio-8081-exec-1] o.s.web.servlet.DispatcherServlet        : Detected org.springframework.web.servlet.support.SessionFlashMapManager@43fb87bb
2025-11-25T01:07:33.834+02:00 DEBUG 26584 --- [lms-authentication] [http-nio-8081-exec-1] o.s.web.servlet.DispatcherServlet        : enableLoggingRequestDetails='false': request parameters and headers will be masked to prevent unsafe logging of potentially sensitive data
2025-11-25T01:07:33.835+02:00  INFO 26584 --- [lms-authentication] [http-nio-8081-exec-1] o.s.web.servlet.DispatcherServlet        : Completed initialization in 3 ms
2025-11-25T01:07:33.860+02:00 DEBUG 26584 --- [lms-authentication] [http-nio-8081-exec-1] o.s.security.web.FilterChainProxy        : Securing POST /api/auth/login
2025-11-25T01:07:33.874+02:00 DEBUG 26584 --- [lms-authentication] [http-nio-8081-exec-1] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2025-11-25T01:07:33.876+02:00  WARN 26584 --- [lms-authentication] [http-nio-8081-exec-1] o.s.w.s.h.HandlerMappingIntrospector     : Cache miss for REQUEST dispatch to '/api/auth/login' (previous null). Performing MatchableHandlerMapping lookup. This is logged once only at WARN level, and every time at TRACE.
2025-11-25T01:07:33.885+02:00 DEBUG 26584 --- [lms-authentication] [http-nio-8081-exec-1] o.s.security.web.FilterChainProxy        : Secured POST /api/auth/login
2025-11-25T01:07:33.888+02:00 DEBUG 26584 --- [lms-authentication] [http-nio-8081-exec-1] o.s.web.servlet.DispatcherServlet        : POST "/api/auth/login", parameters={}
2025-11-25T01:07:33.890+02:00 DEBUG 26584 --- [lms-authentication] [http-nio-8081-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.lms.controller.AuthController#login(LoginRequest)
2025-11-25T01:07:33.965+02:00 DEBUG 26584 --- [lms-authentication] [http-nio-8081-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [LoginRequest(email=amir123@campus.edu, password=Password@123, rememberMe=true)]
2025-11-25T01:07:34.341+02:00 DEBUG 26584 --- [lms-authentication] [http-nio-8081-exec-1] org.hibernate.SQL                        : 
    select
        u1_0.user_id,
        u1_0.campus_id,
        u1_0.created_at,
        u1_0.deleted_at,
        u1_0.email,
        u1_0.email_verified,
        u1_0.first_name,
        u1_0.last_login_at,
        u1_0.last_name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.profile_picture_url,
        r1_0.user_id,
        r1_1.role_id,
        r1_1.created_at,
        r1_1.role_description,
        r1_1.role_name,
        u1_0.status,
        u1_0.updated_at 
    from
        users u1_0 
    left join
        (user_roles r1_0 
    join
        roles r1_1 
            on r1_1.role_id=r1_0.role_id) 
        on u1_0.user_id=r1_0.user_id 
    where
        u1_0.email=? 
        and u1_0.deleted_at is null
2025-11-25T01:07:34.362+02:00 DEBUG 26584 --- [lms-authentication] [http-nio-8081-exec-1] org.hibernate.SQL                        : 
    select
        tfa1_0.auth_id,
        tfa1_0.backup_codes,
        tfa1_0.created_at,
        tfa1_0.enabled,
        tfa1_0.last_used_at,
        tfa1_0.secret_key,
        tfa1_0.updated_at,
        tfa1_0.user_id 
    from
        two_factor_auth tfa1_0 
    where
        tfa1_0.user_id=?
2025-11-25T01:07:34.367+02:00 DEBUG 26584 --- [lms-authentication] [http-nio-8081-exec-1] org.hibernate.SQL                        : 
    select
        p1_0.role_id,
        p1_1.permission_id,
        p1_1.created_at,
        p1_1.module,
        p1_1.permission_description,
        p1_1.permission_name 
    from
        role_permissions p1_0 
    join
        permissions p1_1 
            on p1_1.permission_id=p1_0.permission_id 
    where
        p1_0.role_id=?
2025-11-25T01:07:34.653+02:00 DEBUG 26584 --- [lms-authentication] [http-nio-8081-exec-1] o.s.s.a.dao.DaoAuthenticationProvider    : Authenticated user
2025-11-25T01:07:34.665+02:00 DEBUG 26584 --- [lms-authentication] [http-nio-8081-exec-1] org.hibernate.SQL                        : 
    select
        u1_0.user_id,
        u1_0.campus_id,
        u1_0.created_at,
        u1_0.deleted_at,
        u1_0.email,
        u1_0.email_verified,
        u1_0.first_name,
        u1_0.last_login_at,
        u1_0.last_name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.profile_picture_url,
        r1_0.user_id,
        r1_1.role_id,
        r1_1.created_at,
        r1_1.role_description,
        r1_1.role_name,
        u1_0.status,
        u1_0.updated_at 
    from
        users u1_0 
    left join
        (user_roles r1_0 
    join
        roles r1_1 
            on r1_1.role_id=r1_0.role_id) 
        on u1_0.user_id=r1_0.user_id 
    where
        u1_0.email=? 
        and u1_0.deleted_at is null
2025-11-25T01:07:34.769+02:00 DEBUG 26584 --- [lms-authentication] [http-nio-8081-exec-1] org.hibernate.SQL                        : 
    insert 
    into
        sessions
        (created_at, device_type, expires_at, ip_address, session_token, user_id, user_agent) 
    values
        (?, ?, ?, ?, ?, ?, ?)
2025-11-25T01:07:34.794+02:00  INFO 26584 --- [lms-authentication] [http-nio-8081-exec-1] com.lms.service.AuthService              : User logged in successfully: amir123@campus.edu
2025-11-25T01:07:34.809+02:00 DEBUG 26584 --- [lms-authentication] [http-nio-8081-exec-1] org.hibernate.SQL                        : 
    update
        users 
    set
        campus_id=?,
        deleted_at=?,
        email=?,
        email_verified=?,
        first_name=?,
        last_login_at=?,
        last_name=?,
        password_hash=?,
        phone=?,
        profile_picture_url=?,
        status=?,
        updated_at=? 
    where
        user_id=?
2025-11-25T01:07:34.832+02:00 DEBUG 26584 --- [lms-authentication] [http-nio-8081-exec-1] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-11-25T01:07:34.838+02:00 DEBUG 26584 --- [lms-authentication] [http-nio-8081-exec-1] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [AuthResponse(accessToken=eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhbWlyMTIzQGNhbXB1cy5lZHUiLCJ1c2VySWQiOjE3LC (truncated)...]
2025-11-25T01:07:34.848+02:00 DEBUG 26584 --- [lms-authentication] [http-nio-8081-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-11-25T01:09:03.876+02:00 DEBUG 26584 --- [lms-authentication] [http-nio-8081-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/auth/me
2025-11-25T01:09:03.913+02:00 DEBUG 26584 --- [lms-authentication] [http-nio-8081-exec-2] org.hibernate.SQL                        : 
    select
        u1_0.user_id,
        u1_0.campus_id,
        u1_0.created_at,
        u1_0.deleted_at,
        u1_0.email,
        u1_0.email_verified,
        u1_0.first_name,
        u1_0.last_login_at,
        u1_0.last_name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.profile_picture_url,
        r1_0.user_id,
        r1_1.role_id,
        r1_1.created_at,
        r1_1.role_description,
        r1_1.role_name,
        u1_0.status,
        u1_0.updated_at 
    from
        users u1_0 
    left join
        (user_roles r1_0 
    join
        roles r1_1 
            on r1_1.role_id=r1_0.role_id) 
        on u1_0.user_id=r1_0.user_id 
    where
        u1_0.email=? 
        and u1_0.deleted_at is null
2025-11-25T01:09:03.916+02:00 DEBUG 26584 --- [lms-authentication] [http-nio-8081-exec-2] org.hibernate.SQL                        : 
    select
        tfa1_0.auth_id,
        tfa1_0.backup_codes,
        tfa1_0.created_at,
        tfa1_0.enabled,
        tfa1_0.last_used_at,
        tfa1_0.secret_key,
        tfa1_0.updated_at,
        tfa1_0.user_id 
    from
        two_factor_auth tfa1_0 
    where
        tfa1_0.user_id=?
2025-11-25T01:09:03.918+02:00 DEBUG 26584 --- [lms-authentication] [http-nio-8081-exec-2] org.hibernate.SQL                        : 
    select
        p1_0.role_id,
        p1_1.permission_id,
        p1_1.created_at,
        p1_1.module,
        p1_1.permission_description,
        p1_1.permission_name 
    from
        role_permissions p1_0 
    join
        permissions p1_1 
            on p1_1.permission_id=p1_0.permission_id 
    where
        p1_0.role_id=?
2025-11-25T01:09:03.923+02:00 DEBUG 26584 --- [lms-authentication] [http-nio-8081-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/auth/me
2025-11-25T01:09:03.924+02:00 DEBUG 26584 --- [lms-authentication] [http-nio-8081-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/api/auth/me", parameters={}
2025-11-25T01:09:03.924+02:00 DEBUG 26584 --- [lms-authentication] [http-nio-8081-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.lms.controller.AuthController#getCurrentUser()
2025-11-25T01:09:03.926+02:00 DEBUG 26584 --- [lms-authentication] [http-nio-8081-exec-2] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.lms.controller.AuthController.getCurrentUser(); target is of class [com.lms.controller.AuthController]
2025-11-25T01:09:03.938+02:00 DEBUG 26584 --- [lms-authentication] [http-nio-8081-exec-2] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.lms.controller.AuthController.getCurrentUser(); target is of class [com.lms.controller.AuthController]
2025-11-25T01:09:03.944+02:00 DEBUG 26584 --- [lms-authentication] [http-nio-8081-exec-2] org.hibernate.SQL                        : 
    select
        u1_0.user_id,
        u1_0.campus_id,
        u1_0.created_at,
        u1_0.deleted_at,
        u1_0.email,
        u1_0.email_verified,
        u1_0.first_name,
        u1_0.last_login_at,
        u1_0.last_name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.profile_picture_url,
        r1_0.user_id,
        r1_1.role_id,
        r1_1.created_at,
        p1_0.role_id,
        p1_1.permission_id,
        p1_1.created_at,
        p1_1.module,
        p1_1.permission_description,
        p1_1.permission_name,
        r1_1.role_description,
        r1_1.role_name,
        u1_0.status,
        u1_0.updated_at 
    from
        users u1_0 
    left join
        (user_roles r1_0 
    join
        roles r1_1 
            on r1_1.role_id=r1_0.role_id) 
        on u1_0.user_id=r1_0.user_id 
    left join
        (role_permissions p1_0 
    join
        permissions p1_1 
            on p1_1.permission_id=p1_0.permission_id) 
        on r1_1.role_id=p1_0.role_id 
    where
        u1_0.user_id=?
2025-11-25T01:09:03.949+02:00 DEBUG 26584 --- [lms-authentication] [http-nio-8081-exec-2] org.hibernate.SQL                        : 
    select
        tfa1_0.auth_id,
        tfa1_0.backup_codes,
        tfa1_0.created_at,
        tfa1_0.enabled,
        tfa1_0.last_used_at,
        tfa1_0.secret_key,
        tfa1_0.updated_at,
        tfa1_0.user_id 
    from
        two_factor_auth tfa1_0 
    where
        tfa1_0.user_id=?
2025-11-25T01:09:03.956+02:00 DEBUG 26584 --- [lms-authentication] [http-nio-8081-exec-2] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-11-25T01:09:03.957+02:00 DEBUG 26584 --- [lms-authentication] [http-nio-8081-exec-2] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [UserDto(userId=17, email=amir123@campus.edu, firstName=Amir, lastName=Doe, phone=+1234567890, profil (truncated)...]
2025-11-25T01:09:03.957+02:00 DEBUG 26584 --- [lms-authentication] [http-nio-8081-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-11-25T01:10:12.707+02:00  INFO 26584 --- [lms-authentication] [SpringApplicationShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2025-11-25T01:10:12.710+02:00  INFO 26584 --- [lms-authentication] [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown initiated...
2025-11-25T01:10:12.720+02:00  INFO 26584 --- [lms-authentication] [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown completed.
