# ============================================
# APPLICATION CONFIGURATION
# ============================================
spring.application.name=lms-authentication
server.port=8081

# ============================================
# DATABASE CONFIGURATION
# ============================================
spring.datasource.url=jdbc:mysql://localhost:3306/edu?useSSL=false&serverTimezone=UTC&allowPublicKeyRetrieval=true&createDatabaseIfNotExist=true
spring.datasource.username=root
spring.datasource.password=
spring.datasource.driver-class-name=com.mysql.cj.jdbc.Driver

# HikariCP Connection Pool Settings
spring.datasource.hikari.minimum-idle=5
spring.datasource.hikari.maximum-pool-size=20
spring.datasource.hikari.idle-timeout=300000
spring.datasource.hikari.connection-timeout=20000
spring.datasource.hikari.max-lifetime=1200000

# ============================================
# JPA/HIBERNATE CONFIGURATION
# ============================================
spring.jpa.hibernate.ddl-auto=validate
spring.jpa.show-sql=true
spring.jpa.properties.hibernate.format_sql=true
spring.jpa.properties.hibernate.dialect=org.hibernate.dialect.MySQL8Dialect
spring.jpa.properties.hibernate.jdbc.batch_size=20
spring.jpa.properties.hibernate.order_inserts=true
spring.jpa.properties.hibernate.order_updates=true
spring.jpa.properties.hibernate.enable_lazy_load_no_trans=true
spring.jpa.open-in-view=false

# ============================================
# JWT CONFIGURATION
# ============================================
# IMPORTANT: Change this secret in production!
app.jwt.secret=5Y8vK3nP9wR2sT7uZ1xB6cM4qN8hL0jF3gD5aE7iO9pW2rV4tY6zX8cA1bS3dQ5e
app.jwt.expiration-ms=3600000
app.jwt.refresh-expiration-ms=604800000

# ============================================
# EMAIL CONFIGURATION (Gmail SMTP)
# ============================================
spring.mail.host=smtp.gmail.com
spring.mail.port=587
spring.mail.username=your-email@gmail.com
spring.mail.password=your-app-specific-password
spring.mail.properties.mail.smtp.auth=true
spring.mail.properties.mail.smtp.starttls.enable=true
spring.mail.properties.mail.smtp.starttls.required=true
spring.mail.properties.mail.smtp.connectiontimeout=5000
spring.mail.properties.mail.smtp.timeout=5000
spring.mail.properties.mail.smtp.writetimeout=5000

# Email Templates
app.mail.from=noreply@campus.edu
app.mail.from-name=Campus LMS

# ============================================
# FRONTEND URL CONFIGURATION
# ============================================
app.frontend.url=http://localhost:3000
app.frontend.reset-password-url=${app.frontend.url}/reset-password
app.frontend.verify-email-url=${app.frontend.url}/verify-email

# ============================================
# CORS CONFIGURATION
# ============================================
app.cors.allowed-origins=http://localhost:3000,http://localhost:4200,http://localhost:8080
app.cors.allowed-methods=GET,POST,PUT,DELETE,PATCH,OPTIONS
app.cors.allowed-headers=*
app.cors.exposed-headers=Authorization
app.cors.allow-credentials=true
app.cors.max-age=3600

# ============================================
# SECURITY CONFIGURATION
# ============================================
# Password encoding strength (10-14 recommended)
app.security.bcrypt-strength=12

# Maximum failed login attempts before account lockout
app.security.max-login-attempts=5

# Account lockout duration in minutes
app.security.lockout-duration-minutes=30

# ============================================
# FILE UPLOAD CONFIGURATION
# ============================================
spring.servlet.multipart.enabled=true
spring.servlet.multipart.max-file-size=50MB
spring.servlet.multipart.max-request-size=50MB
spring.servlet.multipart.file-size-threshold=2MB

# File storage location
app.file.upload-dir=./uploads
app.file.allowed-extensions=pdf,doc,docx,txt,jpg,jpeg,png,gif

# ============================================
# LOGGING CONFIGURATION
# ============================================
logging.level.root=INFO
logging.level.com.lms=DEBUG
logging.level.org.springframework.security=DEBUG
logging.level.org.springframework.web=DEBUG
logging.level.org.hibernate.SQL=DEBUG
logging.level.org.hibernate.type.descriptor.sql.BasicBinder=TRACE

# Log file configuration
logging.file.name=logs/lms-authentication.log
logging.file.max-size=10MB
logging.file.max-history=30

# ============================================
# ACTUATOR CONFIGURATION
# ============================================
management.endpoints.web.exposure.include=health,info,metrics,prometheus
management.endpoint.health.show-details=when-authorized
management.endpoint.health.probes.enabled=true
management.health.livenessState.enabled=true
management.health.readinessState.enabled=true

# ============================================
# ASYNC & THREAD POOL CONFIGURATION
# ============================================
spring.task.execution.pool.core-size=5
spring.task.execution.pool.max-size=10
spring.task.execution.pool.queue-capacity=100
spring.task.execution.thread-name-prefix=async-

# ============================================
# JACKSON CONFIGURATION
# ============================================
spring.jackson.serialization.write-dates-as-timestamps=false
spring.jackson.time-zone=UTC
spring.jackson.default-property-inclusion=non_null
spring.jackson.serialization.fail-on-empty-beans=false

# ============================================
# API DOCUMENTATION (Swagger/OpenAPI)
# ============================================
springdoc.api-docs.path=/v3/api-docs
springdoc.swagger-ui.path=/swagger-ui.html
springdoc.swagger-ui.enabled=true
springdoc.swagger-ui.operations-sorter=method
springdoc.swagger-ui.tags-sorter=alpha
springdoc.show-actuator=true

# API Info
springdoc.api-docs.info.title=LMS Authentication API
springdoc.api-docs.info.description=Learning Management System Authentication Module API
springdoc.api-docs.info.version=1.0.0
springdoc.api-docs.info.contact.name=LMS Support
springdoc.api-docs.info.contact.email=support@campus.edu

# ============================================
# TIMEZONE & LOCALE
# ============================================
spring.jackson.time-zone=UTC
spring.mvc.format.date-time=iso
server.servlet.encoding.charset=UTF-8
server.servlet.encoding.enabled=true
server.servlet.encoding.force=true

# ============================================
# ERROR HANDLING
# ============================================
server.error.include-message=always
server.error.include-binding-errors=always
server.error.include-stacktrace=on_param
server.error.include-exception=false

# ============================================
# SESSION CONFIGURATION
# ============================================
server.servlet.session.timeout=30m
server.servlet.session.cookie.http-only=true
server.servlet.session.cookie.secure=false
server.servlet.session.cookie.same-site=lax

# ============================================
# CACHE CONFIGURATION
# ============================================
spring.cache.type=simple
spring.cache.cache-names=users,roles,permissions

# ============================================
# VALIDATION
# ============================================
spring.validation.enabled=true

# ============================================
# DEVELOPMENT ONLY SETTINGS
# ============================================
# Set to false in production
spring.devtools.restart.enabled=true
spring.devtools.livereload.enabled=true

# ============================================
# CUSTOM APPLICATION PROPERTIES
# ============================================
# Two-Factor Authentication
app.2fa.enabled=false
app.2fa.issuer=Campus LMS

# Token expiration settings
app.token.verification-expiration-hours=24
app.token.reset-password-expiration-hours=2

# Rate limiting
app.rate-limit.enabled=true
app.rate-limit.requests-per-minute=60

# Session management
app.session.max-sessions-per-user=3
app.session.prevent-concurrent-logins=false